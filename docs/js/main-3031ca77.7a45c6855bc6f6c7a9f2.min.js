"use strict";(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[7637],{31381:(e,t,n)=>{n.d(t,{j:()=>Z});var a=n(56655),r=n(28195),s=n(82240),i=n(33938),l=n(19623),o=n(45567),c=n(63109),u=n.n(c),p=n(42825),d=n.n(p),f=n(67294),v=n(82100),m=n(55168),h=n(9231),x=n(76849),j=n(34566),b=n(85893);function Z(e){(0,m.k6)();var t=(0,v.I0)(),n=(0,f.useState)(!1),c=(0,o.Z)(n,2),p=c[0],Z=c[1],y=(0,f.useState)(!1),k=(0,o.Z)(y,2),P=k[0],N=k[1],w=(0,f.useState)(""),S=(0,o.Z)(w,2),L=S[0],T=S[1],g=(0,f.useState)(""),A=(0,o.Z)(g,2),D=A[0],z=A[1],_=(0,v.v9)((function(e){return e})),C=_.wallState,B=_.balState;(0,f.useEffect)((function(){Z("object"===(0,l.Z)(window.tronWeb)?"has":"no"),N("object"===(0,l.Z)(window.tp)&&window.tp.isConnected());var e=C||"";"object"===(0,l.Z)(C)&&delete e.selectedHex,T(d()(e))}),[C,B]);var q=function(){var e=(0,i.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.tronWeb){e.next=3;break}throw new Error("No tronWeb in your enviroment.");case 3:return e.next=5,(0,j.dy)(t);case 5:n=e.sent,z(d()(n||"")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),z(d()(e.t0&&e.t0.message?e.t0.message:"ex parse fail")),s.Z.show({icon:"fail",content:e.t0.message,duration:6e3});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)(a.Z,{className:"debug-card",title:"Tronweb Enviroment",extra:(0,b.jsx)(r.Z,{size:"mini",fill:"outline",onClick:q,children:"Debug DApp load"}),bodyClassName:"debug-card__body",children:[(0,b.jsx)(h.Z,{label:"Has TronWeb",content:p}),(0,b.jsx)(h.Z,{label:"Has TP",content:P?"has TP":"no"}),(0,b.jsx)(x.Z,{label:"Wallet State",content:L}),(0,b.jsx)(x.Z,{label:"Debug Result",content:D})]})}},34837:(e,t,n)=>{n.d(t,{Z:()=>ie});var a=n(14890),r=n(82100),s=n(55168),i=n(13535),l=n.n(i),o=n(33938),c=n(68420),u=n(27344),p=n(90306),d=n(22310),f=n(3362),v=n(63109),m=n.n(v),h=n(67294),x=n(56655),j=n(28195),b=n(3771),Z=n(27642),y=n(45567),k=n(88066),P=n.n(k),N=n(51005),w=n(28850),S=n(52159),L=n(28883),T=n(5382),g=n(14197),A=n(85893);function D(e){(0,s.k6)();var t=(0,h.useState)(!0),n=(0,y.Z)(t,2),a=n[0],i=n[1],l=(0,h.useState)(0),o=(0,y.Z)(l,2),c=o[0],u=o[1],p=(0,h.useState)(0),d=(0,y.Z)(p,2),f=d[0],v=d[1],m=(0,h.useState)(0),k=(0,y.Z)(m,2),D=k[0],z=k[1],_=(0,h.useState)("deposit-card"),C=(0,y.Z)(_,2),B=C[0],q=C[1],E=(0,r.v9)((function(e){return e.skinState})).isDarkTheme,I=(0,r.v9)((function(e){return e.wallState})),K=I.blockchainKey,R=I.selectedAddress,V=((0,r.v9)((function(e){return e.dappState})).inviter,(0,r.v9)((function(e){return e.balState}))),W=V.bfbPLpBalance,M=V.myDepositLPAmount,H=V.PLPPoolTotal,O=V.approval,F=void 0===O?{}:O;(0,h.useEffect)((function(){var e={blockchainKey:K,fixed:4},t=F.plpApproval,n=void 0===t?0:t;i((0,L.bZ)(n,K)),u((0,L.Pj)(W,e)),v((0,L.Pj)(H,e)),z((0,L.Pj)(M,e))}),[K,R]),(0,h.useEffect)((function(){var e=(0,S.Rt)("deposit-card",{isDarkTheme:E});q(e)}),[E]);var U=function(){var e;window.open(P()(e="".concat(T.hn,"redirect=")).call(e,T.vN,"&utm_source=tokenpocket"),"sunswap")};return(0,A.jsx)("div",{className:"deposit-wrapper",children:(0,A.jsxs)(x.Z,{className:B,title:(0,A.jsxs)("div",{className:"deposit-card-title",children:[(0,A.jsx)(w.Z,{type:"brave-bf",style:{fontSize:"1.5em"}}),(0,A.jsx)(w.Z,{type:"brave-trx",style:{fontSize:"1.25em",marginLeft:"-0.25em"}}),(0,A.jsx)("span",{className:"title",children:"BFB-TRX PLP "})]}),children:[(0,A.jsxs)(Z.Z,{className:"liquidity-pool",layout:"horizontal",children:[(0,A.jsx)(Z.Z.Item,{label:"质押数量",children:(0,A.jsx)("span",{children:D})}),(0,A.jsx)(Z.Z.Item,{label:"可用余额",children:(0,A.jsx)("span",{children:c})}),(0,A.jsxs)("div",{className:"liquidity-form-item",children:[(0,A.jsx)(b.Z,{placeholder:"请输入质押数量",clearable:!0,className:"liquidity-input"}),(0,A.jsx)("div",{className:"liquidity-input-btn",children:(0,A.jsx)(j.Z,{color:"primary",size:"mini",children:"Max"})})]})]}),(0,A.jsx)("div",{className:"deposit-card-btns",children:a?(0,A.jsx)(j.Z,{color:"primary",block:!0,size:"small",children:"Approve"}):(0,A.jsx)(j.Z,{color:"primary",block:!0,size:"small",children:"Deposit"})}),(0,A.jsxs)("div",{className:"deposit-card__footer",children:[(0,A.jsx)("span",{className:"foot-label",children:"总抵押量:"}),(0,A.jsxs)("span",{className:"foot-desc",children:[f," PLP"]})]}),(0,A.jsxs)("div",{className:"deposit-card__footer flex-between",children:[(0,A.jsx)("span",{className:"foot-label",children:(0,A.jsx)(j.Z,{color:"primary",size:"mini",fill:"none",onClick:U,children:g.u})}),(0,A.jsx)("span",{className:"foot-desc",children:(0,A.jsx)(N.Z,{onClick:U})})]})]})})}var z=n(82240),_=n(44845),C=n(89356),B=n.n(C),q=n(63263),E=n.n(q),I=n(30699),K=n.n(I),R=n(58377),V=n.n(R),W=n(28834),M=n.n(W),H=n(13038),O=n.n(H),F=n(32752),U=n.n(F),X=n(44341),$=n.n(X),G=n(27897),J=(n(41864),n(79612)),Q=(n(49947),n(44177),n(11770),n(68197)),Y=n(25108);function ee(e,t){var n=B()(e);if(E()){var a=E()(e);t&&(a=K()(a).call(a,(function(t){return V()(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n,a=null!=arguments[t]?arguments[t]:{};if(t%2)M()(n=ee(Object(a),!0)).call(n,(function(t){(0,_.Z)(e,t,a[t])}));else if(O())U()(e,O()(a));else{var r;M()(r=ee(Object(a))).call(r,(function(t){$()(e,t,V()(a,t))}))}}return e}function ne(e){(e||{}).inviter;var t=(0,r.I0)(),n=(0,h.useState)(!0),a=(0,y.Z)(n,2),s=(a[0],a[1]),i=(0,h.useState)(0),l=(0,y.Z)(i,2),c=l[0],u=l[1],p=(0,h.useState)(0),d=(0,y.Z)(p,2),f=d[0],v=d[1],k=(0,h.useState)(0),D=(0,y.Z)(k,2),_=D[0],C=D[1],B=(0,h.useState)(0),q=(0,y.Z)(B,2),E=q[0],I=q[1],K=(0,h.useState)("deposit-card"),R=(0,y.Z)(K,2),V=R[0],W=R[1],M=(0,r.v9)((function(e){return e.skinState})).isDarkTheme,H=(0,r.v9)((function(e){return e.wallState})),O=H.blockchainKey,F=H.selectedAddress,U=(0,r.v9)((function(e){return e.balState})),X=U.bfbLpBalance,$=U.myDepositLPAmount,ee=U.LPPoolTotal,ne=U.approval,ae=void 0===ne?{}:ne;(0,h.useEffect)((function(){var e={blockchainKey:O,fixed:4},t=ae.lpApproval,n=void 0===t?0:t;s((0,L.bZ)(n,O)),u((0,L.Pj)(X,e)),v((0,L.Pj)(ee,e)),C((0,L.Pj)($,e))}),[O,F,X,$,ee,ae]),(0,h.useEffect)((function(){var e=(0,S.Rt)("deposit-card",{isDarkTheme:M});W(e)}),[M]);var re=function(){var e;window.open(P()(e="".concat(T.hn,"redirect=")).call(e,T.vN,"&utm_source=tokenpocket"),"sunswap")},se=function(){var e=(0,o.Z)(m().mark((function e(){var n,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,L.TM)(O),e.prev=1,e.next=4,(0,G.jE)(n.toString());case 4:a=e.sent,t((0,J.kI)({lpApproval:"0"})),Y.log(a),t((0,Q.ZP)(te(te({},a),{},{blockchainKey:O}))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),Y.log(e.t0),z.Z.show({icon:"fail",content:"string"==typeof e.t0?e.t0:e.t0&&e.t0.message?e.t0.message:"Unknow error.",duration:5e3});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return(0,A.jsx)("div",{className:"deposit-wrapper",children:(0,A.jsxs)(x.Z,{className:V,title:(0,A.jsxs)("div",{className:"deposit-card-title",children:[(0,A.jsx)(w.Z,{type:"brave-bf",style:{fontSize:"1.5em"}}),(0,A.jsx)(w.Z,{type:"brave-trx",style:{fontSize:"1.25em",marginLeft:"-0.25em"}}),(0,A.jsx)("span",{className:"title",children:"BFB-TRX LP "})]}),children:[(0,A.jsxs)(Z.Z,{className:"liquidity-pool",layout:"horizontal",children:[(0,A.jsx)(Z.Z.Item,{label:"质押数量",children:(0,A.jsx)("span",{children:_})}),(0,A.jsx)(Z.Z.Item,{label:"可用余额",children:(0,A.jsx)("span",{children:c})}),(0,A.jsxs)("div",{className:"liquidity-form-item",children:[(0,A.jsx)(b.Z,{value:E,placeholder:"请输入质押数量",clearable:!1,onChange:function(e){I(e)},className:"liquidity-input"}),(0,A.jsx)("div",{className:"liquidity-input-btn",children:(0,A.jsx)(j.Z,{color:"primary",size:"mini",onClick:function(){I(c)},children:"Max"})})]})]}),(0,A.jsx)("div",{className:"deposit-card-btns",children:(0,A.jsx)(j.Z,{color:"primary",block:!0,size:"small",onClick:se,children:"Approve"})}),(0,A.jsxs)("div",{className:"deposit-card__footer",children:[(0,A.jsx)("span",{className:"foot-label",children:"总抵押量:"}),(0,A.jsxs)("span",{className:"foot-desc",children:[f," LP"]})]}),(0,A.jsxs)("div",{className:"deposit-card__footer flex-between",children:[(0,A.jsx)("span",{className:"foot-label",children:(0,A.jsx)(j.Z,{color:"primary",size:"mini",fill:"none",onClick:re,children:g.u})}),(0,A.jsx)("span",{className:"foot-desc",children:(0,A.jsx)(N.Z,{onClick:re})})]})]})})}function ae(e){var t=function(){if("undefined"==typeof Reflect||!l())return!1;if(l().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(l()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.Z)(e);if(t){var r=(0,f.Z)(this).constructor;n=l()(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.Z)(this,n)}}var re=function(e){(0,p.Z)(r,e);var t,n,a=ae(r);function r(e){var t;return(0,c.Z)(this,r),(t=a.call(this,e)).state={formLayout:{},layout:"horizontal"},t}return(0,u.Z)(r,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"approvalPlp",value:(n=(0,o.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"depositPlp",value:(t=(0,o.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"renderInviter",value:function(e){return(0,A.jsx)("div",{className:"deposit-wrapper",children:(0,A.jsx)("div",{className:"deposit-inviter",children:(0,A.jsx)("span",{children:e})})})}},{key:"render",value:function(){var e=this.props.inviter;return(0,A.jsxs)("div",{className:"deposit-page",children:[this.renderInviter(e),(0,A.jsx)(D,{inviter:e}),(0,A.jsx)(ne,{inviter:e})]})}}]),r}(h.Component),se=n(56036);const ie=(0,a.qC)(s.EN,(0,r.$j)((function(e){var t=e.skinState.isDarkTheme,n=e.wallState,a=n.blockchainKey,r=n.selectedAddress,s=e.balState,i=s.bfbPLpBalance,l=s.bfbLpBalance,o=s.myDepositLPAmount,c=s.myDepositPLPAmount,u=s.PLPPoolTotal,p=s.LPPoolTotal,d={blockchainKey:a,fixed:4},f=s.approval||{},v=f.plpApproval,m=f.lpApproval,h=(0,L.bZ)(v,a),x=(0,L.bZ)(m,a),j=(0,L.Pj)(i,d),b=(0,L.Pj)(c,d),Z=(0,L.Pj)(u,d),y=(0,L.Pj)(l,d),k=(0,L.Pj)(o,d),P=(0,L.Pj)(p,d);return{isDarkTheme:t,inviter:(0,se._8)(r),plpNeedApproval:h,plNeedApproval:x,bfbPLpBalValt:j,myDepositPLPValt:b,PLPPoolTotalValt:Z,bfbLpBalValt:y,myDepositLPValt:k,LPPoolTotalValt:P}}),(function(e){return{}})))(re)}}]);