"use strict";(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[7637],{31381:(e,t,n)=>{n.d(t,{j:()=>j});var r=n(56655),a=n(28195),s=n(82240),i=n(33938),o=n(19623),c=n(45567),l=n(63109),u=n.n(l),p=n(42825),d=n.n(p),f=n(67294),v=n(82100),m=n(55168),h=n(9231),x=n(76849),b=n(34566),Z=n(85893);function j(e){(0,m.k6)();var t=(0,v.I0)(),n=(0,f.useState)(!1),l=(0,c.Z)(n,2),p=l[0],j=l[1],k=(0,f.useState)(!1),y=(0,c.Z)(k,2),w=y[0],N=y[1],S=(0,f.useState)(""),P=(0,c.Z)(S,2),g=P[0],C=P[1],D=(0,f.useState)(""),L=(0,c.Z)(D,2),T=L[0],z=L[1],W=(0,v.v9)((function(e){return e})),_=W.wallState,A=W.balState;(0,f.useEffect)((function(){j("object"===(0,o.Z)(window.tronWeb)?"has":"no"),N("object"===(0,o.Z)(window.tp)&&window.tp.isConnected());var e=_||"";"object"===(0,o.Z)(_)&&delete e.selectedHex,C(d()(e))}),[_,A]);var E=function(){var e=(0,i.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.tronWeb){e.next=3;break}throw new Error("No tronWeb in your enviroment.");case 3:return e.next=5,(0,b.dy)(t);case 5:n=e.sent,z(d()(n||"")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),z(d()(e.t0&&e.t0.message?e.t0.message:"ex parse fail")),s.Z.show({icon:"fail",content:e.t0.message,duration:6e3});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(r.Z,{className:"debug-card",title:"Tronweb Enviroment",extra:(0,Z.jsx)(a.Z,{size:"mini",fill:"outline",onClick:E,children:"Debug DApp load"}),bodyClassName:"debug-card__body",children:[(0,Z.jsx)(h.Z,{label:"Has TronWeb",content:p}),(0,Z.jsx)(h.Z,{label:"Has TP",content:w?"has TP":"no"}),(0,Z.jsx)(x.Z,{label:"Wallet State",content:g}),(0,Z.jsx)(x.Z,{label:"Debug Result",content:T})]})}},34837:(e,t,n)=>{n.d(t,{Z:()=>oe});var r=n(14890),a=n(82100),s=n(55168),i=n(13535),o=n.n(i),c=n(33938),l=n(68420),u=n(27344),p=n(90306),d=n(22310),f=n(3362),v=n(63109),m=n.n(v),h=n(67294),x=n(56655),b=n(28195),Z=n(3771),j=n(27642),k=n(82240),y=n(45567),w=n(51445),N=n.n(w),S=n(51005),P=n(28850),g=n(13866),C=n(28883),D=n(14197),L=n(79548),T=n(68197),z=n(15338),W=n(88806),_=n(85893);function A(e){var t=this,n=((0,s.k6)(),(0,a.I0)()),r=(0,h.useState)(!0),i=(0,y.Z)(r,2),o=i[0],l=i[1],u=(0,h.useState)(0),p=(0,y.Z)(u,2),d=p[0],f=p[1],v=(0,h.useState)(0),w=(0,y.Z)(v,2),A=w[0],E=w[1],q=(0,h.useState)(0),I=(0,y.Z)(q,2),B=I[0],R=I[1],O=(0,h.useState)(0),K=(0,y.Z)(O,2),U=K[0],F=K[1],H=(0,h.useState)(0),M=(0,y.Z)(H,2),V=M[0],X=M[1],$=(0,h.useState)("deposit-card"),G=(0,y.Z)($,2),J=G[0],Q=G[1],Y=(0,a.v9)((function(e){return e.skinState})).isDarkTheme,ee=(0,a.v9)((function(e){return e.wallState})),te=ee.blockchainKey,ne=ee.selectedAddress,re=(0,a.v9)((function(e){return e.dappState})).inviter,ae=(0,a.v9)((function(e){return e.balState})),se=ae.bfbPLpBalance,ie=ae.myDepositLPAmount,oe=ae.PLPPoolTotal,ce=(0,a.v9)((function(e){return e.balState.approval})).plpApproval;(0,h.useEffect)((function(){l((0,C.Or)(ce)),f((0,g.bW)(se)),X((0,g.bW)(se,!0)),E((0,g.bW)(oe)),R((0,g.bW)(ie))}),[te,ne,ce]),(0,h.useEffect)((function(){var e=(0,g.Rt)("deposit-card",{isDarkTheme:Y});Q(e)}),[Y]);var le=function(){var e=(0,c.Z)(m().mark((function e(){var t,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,C.DE)(),e.prev=1,e.next=4,(0,z.TE)(t);case 4:r=e.sent,n((0,T.ZP)(r,"Approve to bLP token")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),n((0,T.dZ)(e.t0,"Approve PLP Token Fail")),k.Z.show({icon:"fail",maskClassName:"brv-mask-overwhite",content:"string"==typeof e.t0?e.t0:e.t0&&e.t0.message?e.t0.message:"Unknow error.",duration:4e3});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){window.open((0,L.t)(),"sunswap")},pe=function(){F("")},de=function(){var e=(0,c.Z)(m().mark((function e(){var r,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,C.vV)(U,se),e.next=4,(0,z._y)(r,re,n);case 4:a=e.sent,n((0,T.ZP)(a,"Deposit PLP")),(0,W.a)({overWhite:!0},N()(pe).call(pe,t)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),k.Z.show({icon:"fail",maskClassName:"brv-mask-overwhite",content:"string"==typeof e.t0?e.t0:e.t0&&e.t0.message?e.t0.message:"Unknow error.",duration:4e3});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,_.jsx)("div",{className:"deposit-wrapper",children:(0,_.jsxs)(x.Z,{className:J,title:(0,_.jsxs)("div",{className:"deposit-card-title",children:[(0,_.jsx)(P.Z,{type:"brave-bf",style:{fontSize:"1.5em"}}),(0,_.jsx)(P.Z,{type:"brave-trx",style:{fontSize:"1.25em",marginLeft:"-0.25em"}}),(0,_.jsx)("span",{className:"title",children:"BFB-TRX PLP "})]}),children:[(0,_.jsxs)(j.Z,{className:"liquidity-pool",layout:"horizontal",children:[(0,_.jsx)(j.Z.Item,{label:"质押数量",children:(0,_.jsx)("span",{children:B})}),(0,_.jsx)(j.Z.Item,{label:"可用余额",children:(0,_.jsx)("span",{children:d})}),(0,_.jsxs)("div",{className:"liquidity-form-item",children:[(0,_.jsx)(Z.Z,{value:U,placeholder:"请输入质押数量",clearable:!0,className:"liquidity-input",onChange:function(e){F(e)}}),(0,_.jsx)("div",{className:"liquidity-input-btn",children:(0,_.jsx)(b.Z,{color:"primary",size:"mini",onClick:function(){F(V)},children:"Max"})})]})]}),(0,_.jsx)("div",{className:"deposit-card-btns",children:o?(0,_.jsx)(b.Z,{color:"primary",block:!0,size:"small",onClick:le,children:"Approve"}):(0,_.jsx)(b.Z,{color:"primary",block:!0,size:"small",onClick:de,children:"Deposit"})}),(0,_.jsxs)("div",{className:"deposit-card__footer",children:[(0,_.jsx)("span",{className:"foot-label",children:"总抵押量:"}),(0,_.jsxs)("span",{className:"foot-desc",children:[A," PLP"]})]}),(0,_.jsxs)("div",{className:"deposit-card__footer flex-between",children:[(0,_.jsx)("span",{className:"foot-label",children:(0,_.jsx)(b.Z,{color:"primary",size:"mini",fill:"none",onClick:ue,children:D.u})}),(0,_.jsx)("span",{className:"foot-desc",children:(0,_.jsx)(S.Z,{onClick:ue})})]})]})})}var E=n(89356),q=n.n(E),I=n(63263),B=n.n(I),R=n(30699),O=n.n(R),K=n(58377),U=n.n(K),F=n(28834),H=n.n(F),M=n(13038),V=n.n(M),X=n(32752),$=n.n(X),G=n(44341),J=n.n(G),Q=n(44845),Y=n(27897),ee=(n(41864),n(25108));function te(e,t){var n=q()(e);if(B()){var r=B()(e);t&&(r=O()(r).call(r,(function(t){return U()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)H()(n=te(Object(r),!0)).call(n,(function(t){(0,Q.Z)(e,t,r[t])}));else if(V())$()(e,V()(r));else{var a;H()(a=te(Object(r))).call(a,(function(t){J()(e,t,U()(r,t))}))}}return e}function re(e){var t=this,n=(0,a.I0)(),r=(0,h.useState)(!0),s=(0,y.Z)(r,2),i=s[0],o=s[1],l=(0,h.useState)(0),u=(0,y.Z)(l,2),p=u[0],d=u[1],f=(0,h.useState)(0),v=(0,y.Z)(f,2),w=v[0],z=v[1],A=(0,h.useState)(0),E=(0,y.Z)(A,2),q=E[0],I=E[1],B=(0,h.useState)(0),R=(0,y.Z)(B,2),O=R[0],K=R[1],U=(0,h.useState)(0),F=(0,y.Z)(U,2),H=F[0],M=F[1],V=(0,h.useState)("deposit-card"),X=(0,y.Z)(V,2),$=X[0],G=X[1],J=(0,a.v9)((function(e){return e.skinState})).isDarkTheme,Q=(0,a.v9)((function(e){return e.dappState})).inviter,te=(0,a.v9)((function(e){return e.wallState})),re=te.blockchainKey,ae=te.selectedAddress,se=(0,a.v9)((function(e){return e.balState})),ie=se.bfbLpBalance,oe=se.myDepositLPAmount,ce=se.LPPoolTotal,le=(0,a.v9)((function(e){return e.balState.approval})).lpApproval;(0,h.useEffect)((function(){o((0,C.Or)(le)),d((0,g.bW)(ie)),M((0,g.bW)(ie,!0)),z((0,g.bW)(ce)),I((0,g.bW)(oe))}),[re,ae,ie,oe,ce,le]),(0,h.useEffect)((function(){var e=(0,g.Rt)("deposit-card",{isDarkTheme:J});G(e)}),[J]);var ue=function(){window.open((0,L.t)(),"sunswap")},pe=function(){K("")},de=function(){var e=(0,c.Z)(m().mark((function e(){var t,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,C.DE)(),e.prev=1,e.next=4,(0,Y.jE)(t);case 4:r=e.sent,n((0,T.ZP)(ne(ne({},r),{},{blockchainKey:re}),"Approval to bLP Token")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),ee.log(e.t0),k.Z.show({icon:"fail",maskClassName:"brv-mask-overwhite",content:"string"==typeof e.t0?e.t0:e.t0&&e.t0.message?e.t0.message:"Unknow error.",duration:5e3});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,c.Z)(m().mark((function e(){var r,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,C.vV)(O,ie),e.next=4,(0,Y.nC)(r,Q,n);case 4:a=e.sent,n((0,T.ZP)(a,"Deposit LP Token")),(0,W.a)({overWhite:!0,duration:1e4},N()(pe).call(pe,t)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),ee.log(">>>>>>>>>>>>",e.t0),k.Z.show({icon:"fail",maskClassName:"brv-mask-overwhite",content:e.t0.message,duration:3e3});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,_.jsx)("div",{className:"deposit-wrapper",children:(0,_.jsxs)(x.Z,{className:$,title:(0,_.jsxs)("div",{className:"deposit-card-title",children:[(0,_.jsx)(P.Z,{type:"brave-bf",style:{fontSize:"1.5em"}}),(0,_.jsx)(P.Z,{type:"brave-trx",style:{fontSize:"1.25em",marginLeft:"-0.25em"}}),(0,_.jsx)("span",{className:"title",children:"BFB-TRX LP "})]}),children:[(0,_.jsxs)(j.Z,{className:"liquidity-pool",layout:"horizontal",children:[(0,_.jsx)(j.Z.Item,{label:"质押数量",children:(0,_.jsx)("span",{children:q})}),(0,_.jsx)(j.Z.Item,{label:"可用余额",children:(0,_.jsx)("span",{children:p})}),(0,_.jsxs)("div",{className:"liquidity-form-item",children:[(0,_.jsx)(Z.Z,{value:O,placeholder:"请输入质押数量",clearable:!1,onChange:function(e){K(e)},className:"liquidity-input"}),(0,_.jsx)("div",{className:"liquidity-input-btn",children:(0,_.jsx)(b.Z,{color:"primary",size:"mini",onClick:function(){K(H)},children:"Max"})})]})]}),(0,_.jsx)("div",{className:"deposit-card-btns",children:i?(0,_.jsx)(b.Z,{color:"primary",block:!0,size:"small",onClick:de,children:"Approve"}):(0,_.jsx)(b.Z,{color:"primary",block:!0,size:"small",onClick:fe,children:"Deposit"})}),(0,_.jsxs)("div",{className:"deposit-card__footer",children:[(0,_.jsx)("span",{className:"foot-label",children:"总抵押量:"}),(0,_.jsxs)("span",{className:"foot-desc",children:[w," LP"]})]}),(0,_.jsxs)("div",{className:"deposit-card__footer flex-between",children:[(0,_.jsx)("span",{className:"foot-label",children:(0,_.jsx)(b.Z,{color:"primary",size:"mini",fill:"none",onClick:ue,children:D.u})}),(0,_.jsx)("span",{className:"foot-desc",children:(0,_.jsx)(S.Z,{onClick:ue})})]})]})})}var ae=n(56036);function se(e){var t=function(){if("undefined"==typeof Reflect||!o())return!1;if(o().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.Z)(e);if(t){var a=(0,f.Z)(this).constructor;n=o()(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var ie=function(e){(0,p.Z)(a,e);var t,n,r=se(a);function a(e){var t;return(0,l.Z)(this,a),(t=r.call(this,e)).state={formLayout:{},layout:"horizontal"},t}return(0,u.Z)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"approvalPlp",value:(n=(0,c.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"depositPlp",value:(t=(0,c.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"renderInviter",value:function(){return(0,_.jsx)("div",{className:"deposit-wrapper",children:(0,_.jsx)("div",{className:"deposit-inviter",children:(0,_.jsx)("span",{children:(0,ae._8)()})})})}},{key:"render",value:function(){this.props.inviter;return(0,_.jsxs)("div",{className:"deposit-page",children:[this.renderInviter(),(0,_.jsx)(A,{}),(0,_.jsx)(re,{})]})}}]),a}(h.Component);const oe=(0,r.qC)(s.EN,(0,a.$j)((function(e){var t=e.skinState.isDarkTheme,n=e.wallState;n.blockchainKey,n.selectedAddress,n.inviter;return{isDarkTheme:t}}),(function(e){return{}})))(ie)}}]);