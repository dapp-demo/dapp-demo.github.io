"use strict";(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[376],{48989:(e,n,t)=>{t.d(n,{Z:()=>T});var a=t(13535),r=t.n(a),o=t(68420),i=t(27344),s=t(90306),c=t(22310),l=t(3362),d=t(54579),u=t.n(d),p=t(67294),f=t(1442),b=t(73727),v=t(64416),h=t(59731),m=t(96252),w=t(82490),x=t(85531),y=t(85893);function A(e){var n=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,a=(0,l.Z)(e);if(n){var o=(0,l.Z)(this).constructor;t=r()(a,arguments,o)}else t=a.apply(this,arguments);return(0,c.Z)(this,t)}}var k=(0,h.lX)(),g=(0,m.Z)(m.E,k),Z=function(e){(0,s.Z)(t,e);var n=A(t);function t(e){var a;return(0,o.Z)(this,t),(a=n.call(this,e)).state={},a}return(0,i.Z)(t,[{key:"componentDidMount",value:function(){!!g.getState().skinState&&g.getState().skinState.isDarkTheme?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme"),(0,x.y)(g),(0,x.nf)(g),(0,x.BN)(g),(0,x.MW)(g),(0,x.aq)(g),u()((function(){(0,x.oR)()}),3e3),u()((function(){(0,x.NK)(),(0,x.Dy)()}),6e3)}},{key:"componentWillUnmount",value:function(){(0,x.eA)(),(0,x.oQ)(),(0,x.Xx)(),(0,x.Gr)(),(0,x.bh)()}},{key:"render",value:function(){return(0,y.jsx)(f.zt,{store:g,children:(0,y.jsx)(b.VK,{history:k,children:(0,y.jsx)(w.E,{})})})}}]),t}(p.Component);const T=(0,v.Z)()(Z)},85531:(e,n,t)=>{t.d(n,{y:()=>g,eA:()=>Z,oR:()=>T,MW:()=>j,Gr:()=>N,rZ:()=>E,nf:()=>S,oQ:()=>C,qM:()=>W,BN:()=>I,Xx:()=>X,Dy:()=>F,aq:()=>z,bh:()=>Q,NK:()=>V});var a=t(22827),r=t(33938),o=t(63109),i=t.n(o),s=t(51445),c=t.n(s),l=t(69617),d=t(11770),u=(t(95219),t(5644)),p=t(54285),f=t(4857),b=t(24381),v=t(51319),h=t(79612),m=t(68197),w=t(25155),x=t(90364),y=t(34566),A=t(25108),k="dapp#init/reload";function g(e){window.addEventListener(k,c()(P).call(P,e))}function Z(){window.removeEventListener(k,P)}function T(){window.dispatchEvent(new CustomEvent(k))}function P(){var e=this.dispatch;window.tronWeb?(e&&e((0,x.O0)(!0)),(0,y.e3)(this)):(e&&e((0,m.RZ)("No tron enviroment detected.","DApp initialize loading.")),G("No tron enviroment detected."))}var L="dapp#balance/reload_all";function j(e){window.addEventListener(L,c()(B).call(B,e))}function N(){window.removeEventListener(L,B)}var E=function(){window.dispatchEvent(new CustomEvent(L,{bubbles:!1}))};function B(e){(0,y.fE)(this)}var R="dapp#account/reload_GetReward";function S(e){window.addEventListener(R,c()(_).call(_,e))}function C(){window.removeEventListener(R,_)}function W(){window.dispatchEvent(new CustomEvent(R))}function _(){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(i().mark((function e(){var n,t,a,r,o,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.dispatch,e.prev=2,e.next=5,(0,l.EA)();case 5:return t=e.sent,a=t.trxweb,r=t.chainKey,t.tpNodeUrl,t.base58,e.next=12,(0,d.mn)(a,r);case 12:o=e.sent,s=o.PLPPoolTotal,c=o.LPPoolTotal,n((0,h.lw)({PLPPoolTotal:s,LPPoolTotal:c})),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(2),n&&n((0,m.RZ)(e.t0,"Reload get my rewards.")),G(e.t0&&e.t0.message?e.t0.message:"Reload get my rewards fail.");case 22:case"end":return e.stop()}}),e,this,[[2,18]])})))).apply(this,arguments)}var M="dapp#deposit@reload_ctrl";function I(e){window.addEventListener(M,c()(U).call(U,e))}function X(){window.removeEventListener(M,U)}function F(){window.dispatchEvent(new CustomEvent(M))}function U(){return K.apply(this,arguments)}function K(){return(K=(0,r.Z)(i().mark((function e(){var n,t,a,r,o,s,c,d,f,b,v,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.dispatch,e.prev=2,e.next=5,(0,l.EA)();case 5:if(a=e.sent,r=a.trxweb,o=a.chainKey,s=null===(t=r.defaultAddress)||void 0===t?void 0:t.base58){e.next=11;break}throw new Error("No wallet address");case 11:return e.next=13,(0,p.LA)(r,o,s);case 13:return c=e.sent,d=c.plpApproval,f=c.plpApprovedAddress,e.next=18,(0,u.W)(r,o,s);case 18:b=e.sent,v=b.lpApproval,x=b.lpApprovedAddress,n((0,w.o8)({plpApprovedAddress:f,lpApprovedAddress:x})),n((0,h.kI)({plpApproval:d,lpApproval:v})),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(2),n&&n((0,m.RZ)(e.t0,"Reload Deposit control fail."));case 28:case"end":return e.stop()}}),e,this,[[2,25]])})))).apply(this,arguments)}var q="dapp@deposit#reload_my_and_total";function z(e){window.addEventListener(q,c()(O).call(O,e))}function Q(){window.removeEventListener(q,O)}function V(){window.dispatchEvent(new CustomEvent(q))}function O(e){return H.apply(this,arguments)}function H(){return(H=(0,r.Z)(i().mark((function e(n){var t,a,r,o,s,c,d,f,w,x,y,k,g,Z,T;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.dispatch,e.prev=2,e.next=5,(0,l.EA)();case 5:if(a=e.sent,r=a.trxweb,o=a.chainKey,r.defaultAddress&&r.defaultAddress.base58){e.next=10;break}throw new b.ZP("Unset address in your wallet",v.yP);case 10:return s=r.defaultAddress.base58,e.next=13,(0,p.jv)(r,o,s);case 13:return c=e.sent,d=c.PLPPoolTotal,f=c.xmfiLPDepositTotal,w=c.xmfiRewardAmount,x=c.xmfiBonusAmount,e.next=20,(0,u.NA)(r,o,s);case 20:y=e.sent,k=y.LPPoolTotal,g=y.bfbLPDepositTotal,Z=y.bfbRewardAmount,T=y.bfbBonusAmount,t((0,h.lw)({PLPPoolTotal:d,LPPoolTotal:k})),t((0,h.Xj)({xmfiLPDepositTotal:f,xmfiRewardAmount:w,xmfiBonusAmount:x,bfbLPDepositTotal:g,bfbRewardAmount:Z,bfbBonusAmount:T})),e.next=33;break;case 29:e.prev=29,e.t0=e.catch(2),A.log("reloadMyDispositTokensAmount Trigger>>>>>>>>>>",e.t0),t&&t((0,m.RZ)(e.t0,"Reload Deposit amount fail."));case 33:case"end":return e.stop()}}),e,this,[[2,29]])})))).apply(this,arguments)}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a.Z.show({icon:"fail",content:e,duration:f.e6})}},34566:(e,n,t)=>{t.d(n,{dy:()=>X,e3:()=>K,fE:()=>q});var a=t(89356),r=t.n(a),o=t(63263),i=t.n(o),s=t(30699),c=t.n(s),l=t(58377),d=t.n(l),u=t(28834),p=t.n(u),f=t(13038),b=t.n(f),v=t(32752),h=t.n(v),m=t(44341),w=t.n(m),x=t(44845),y=t(33938),A=t(88066),k=t.n(A),g=t(63109),Z=t.n(g),T=t(69617),P=t(13870),L=t(81435),j=t(75626),N=t(46227),E=t(79612),B=t(90364),R=t(68197),S=t(96934),C=t(25155),W=t(54285),_=t(5644),D=t(25108);function M(e,n){var t=r()(e);if(i()){var a=i()(e);n&&(a=c()(a).call(a,(function(n){return d()(e,n).enumerable}))),t.push.apply(t,a)}return t}function I(e){for(var n=1;n<arguments.length;n++){var t,a=null!=arguments[n]?arguments[n]:{};if(n%2)p()(t=M(Object(a),!0)).call(t,(function(n){(0,x.Z)(e,n,a[n])}));else if(b())h()(e,b()(a));else{var r;p()(r=M(Object(a))).call(r,(function(n){w()(e,n,d()(a,n))}))}}return e}function X(e){return F.apply(this,arguments)}function F(){return(F=(0,y.Z)(Z().mark((function e(n){var t,a,r,o,i,s,c,l,d,u,p,f,b,v,h,m,w;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={connected:!1},!(a=(0,N.Fx)())){e.next=12;break}return t.connected=Boolean(a),e.next=6,(0,N.t5)(window.tp);case 6:r=e.sent,i=(o=r||{}).walletName,s=o.walletType,c=o.walletVer,l=o.walletChainKey,d=o.selectedAccountName,u=o.selectedAddress,n((0,B.uW)({walletName:i,walletType:s,walletVer:c,walletChainKey:l})),u&&(p=trxweb.address.toHex(u),n((0,B.DE)(d||"",u,p))),e.next=14;break;case 12:tronWeb.request({method:"tron_requestAccounts"}).then((function(e){t.connected=!(!e||200!==e.code),n((0,B.MA)(t.connected))})),tronWeb.isConnected().then((function(e){n((0,R.RZ)(e))}));case 14:if(window.tronWeb.isTronLink&&(t.walletType=j.pX,n((0,B.Y7)("tronLink")),n((0,B.hb)(j.pX))),!tronWeb.defaultAddress||!tronWeb.defaultAddress.base58){e.next=25;break}return f=tronWeb.defaultAddress,b=f.base58,v=f.name,h=f.hex,f.type,b&&n((0,B.DE)(v,b,h)),e.next=20,tronWeb.trx.getBalance(b);case 20:m=e.sent,n((0,E.IP)(m)),w=window.tronWeb.fullNode&&window.tronWeb.fullNode.host?window.tronWeb.fullNode.host:"",n((0,B.Eo)(w)),t=I(I({},t),{},{base58:b,name:v,trxBalance:m,nodeUrl:w});case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=(0,y.Z)(Z().mark((function e(n){var t,a,r,o,i,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.EA)();case 2:t=e.sent,a=t.trxweb,r=t.chainKey,o=t.tpNodeUrl,n((0,B.CX)(r)),n((0,B.My)(o)),i=a.fullNode&&a.fullNode.host?a.fullNode.host:"current no nodeURL",S.BS&&((s={tpNodeUrl:o,cacheCurrNodeUrl:i}).defaultAddress=a.defaultAddress||"",n((0,R.RZ)(s,"This an debug Message."))),(0,L.ZN)(a,r).then((function(e){var t=e||{},a=t.bfbBalance,r=t.bfbTotalSupply;n((0,E.lw)({bfbBalance:a,bfbTotalSupply:r}))})).catch((function(e){var t;n((0,R.RZ)(e,k()(t="load BFB balance fail. at chain ".concat(r," - ")).call(t,i)))})),(0,L.Pv)(a,r).then((function(e){var t=e||{},a=t.xmfiLPTokenAddress,r=t.bfbPlpTotalSupply,o=t.PLPPoolTotal,i=t.xmfiBeginTime,s=t.xmfiExpireTime,c=t.xmfiRewardStarted,l=t.xmfiWithdrawEnabled,d=t.preIncome,u={xmfiBeginTime:i,xmfiExpireTime:s,xmfiRewardStarted:c,xmfiWithdrawEnabled:l};D.log("xmfiLPTokenAddress>>>>>>>>>",a),n((0,C.mI)(a)),n((0,C.ee)(u)),n((0,E.lw)({PLPPoolTotal:o,bfbPlpTotalSupply:r})),n((0,E.Xj)(d))})).catch((function(e){var t;D.log("V2>>>queryXMFiLPBaseInfoSilent>>>",e),n((0,R.RZ)(e,k()(t="load XMFi Base info fail. at chain ".concat(r," - ")).call(t,i)))})),(0,L.Aq)(a,r).then((function(e){var t=e||{},a=t.bfbLPTokenAddress,r=t.bfbLpTotalSupply,o=t.LPPoolTotal,i=t.bfbBeginTime,s=t.bfbExpireTime,c=t.bfbRewardStarted,l=t.bfbWithdrawEnabled,d=t.preIncome,u={bfbBeginTime:i,bfbExpireTime:s,bfbRewardStarted:c,bfbWithdrawEnabled:l};n((0,C.OS)(a)),n((0,C.ee)(u)),n((0,E.lw)({LPPoolTotal:o,bfbLpTotalSupply:r})),n((0,E.Xj)(d))})).catch((function(e){var t;D.log("V2>>>queryBfbLPBaseInfoSilent>>>",e),n((0,R.RZ)(e,k()(t="load XMFi Base info fail. at chain ".concat(r," - ")).call(t,i)))}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){var n=e.dispatch;X(n).then((function(e){return D.log(">>initialTrxBase>>>>",e)})).catch((function(e){n((0,R.RZ)(e,"Load DApp Trx Base fail."))})),function(e){return U.apply(this,arguments)}(n).catch((function(e){n((0,R.RZ)(e,"Load DApp Biz Base fail."))}))}function q(e){return z.apply(this,arguments)}function z(){return(z=(0,y.Z)(Z().mark((function e(n){var t,a,r,o,i,s,c,l,d,u,p,f;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(t=n||{}).dispatch,r=t.getState,e.prev=1,"function"==typeof a&&"function"==typeof r){e.next=4;break}throw new Error("params store illegal");case 4:return o=r().solState,i=o.bfbTokenAddress,void 0===i?"":i,s=o.plpTokenAddress,void 0===s?"":s,c=o.lpTokenAddress,void 0===c?"":c,l=o.xmfiLPTokenAddress,d=o.bfbLPTokenAddress,e.next=7,(0,T.EA)();case 7:u=e.sent,p=u.trxweb,f=u.chainKey,u.tpNodeUrl,(0,P.gD)(p,f).then((function(e){a((0,E.lw)({bfbBalance:e}))})).catch((function(e){a((0,R.RZ)(e,"load BFB balance fail"))})),(0,W.a_)(p,f,l).then((function(e){a((0,E.lw)({bfbPLpBalance:e}))})).catch((function(e){D.log("Query XMFi LP balance fail>>>",e,l),a((0,R.RZ)(e,"Query XMFi LP balance fail"))})),(0,_.tt)(p,f,d).then((function(e){a((0,E.lw)({bfbLpBalance:e}))})).catch((function(e){D.log("Query BFB LP balance fail>>>",e,d),a((0,R.RZ)(e,"Query BFB LP balance fail"))})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),a((0,R.RZ)(e.t0,"reload balance fail"));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}},59188:(e,n,t)=>{t.d(n,{d:()=>o});t(67294);var a=t(55168),r=t(85893);function o(e){(0,a.k6)();return(0,r.jsx)("div",{children:(0,r.jsx)("h1",{children:"Test"})})}},97363:(e,n,t)=>{t.d(n,{R:()=>W});var a=t(33938),r=t(45567),o=t(63109),i=t.n(o),s=t(67294),c=t(85518),l=t(1442),d=t(55168),u=t(17563),p=t(3666),f=t(96934),b=t(54781),v=t(93806),h=t(5562),m=t(50047),w=t.n(m),x=t(8803),y=t(28850),A=t(79949),k=[{label:"Home",pathname:"/index",icon:"brave-index-colorful"},{label:"Deposit",pathname:"/p/deposit",icon:"brave-deposit"},{label:"Invite",pathname:"/p/invite",icon:"brave-invite"},{label:"Profile",pathname:"/p/profile",icon:"brave-bfb_pool"}],g=t(22827),Z=t(74855),T=t(26793),P=t(85893);function L(e){var n=e.className,t=void 0===n?"":n,a=(e.hasProvider,e.braveIconType),o=void 0===a?"":a,i=((0,T.$)().t,(0,s.useState)("0")),c=(0,r.Z)(i,2),d=c[0],u=c[1],p=(0,l.v9)((function(e){return e.wallState})),f=p.selectedAddress,v=(p.blockchainKey,(0,l.v9)((function(e){return e.balState||{}}))),h=(v.trxBalance,v.bfbBalance);return(0,s.useEffect)((function(){var e=(0,b.x6)(h||0);u(e)}),[h]),(0,P.jsxs)("div",{className:"brv-popupbar ".concat(t),children:[(0,P.jsx)("div",{className:"brv-popupbar-icon",children:o&&(0,P.jsx)(y.Z,{type:"brave-".concat(o)})}),(0,P.jsxs)("div",{className:"brv-popupbar-acclayout",children:[(0,P.jsx)("span",{className:"balance-valt",children:d}),(0,P.jsxs)("div",{className:"address-row",children:[(0,P.jsx)("span",{className:"address-short",children:f?(0,b.VE)(f):"No account"}),f&&(0,P.jsx)(Z.CopyToClipboard,{text:f,onCopy:function(){g.Z.show({content:"copied",duration:1500})},children:(0,P.jsx)(y.Z,{type:"brave-copy-colorful",style:{marginLeft:"4px"}})})]})]})]})}function j(e){var n=e.popupClassName,t=void 0===n?"":n,o=(0,T.$)().t,u=(0,d.k6)(),p=(0,d.TH)(),m=(0,s.useState)(!1),g=(0,r.Z)(m,2),Z=g[0],j=g[1],N=(0,s.useState)(!1),E=(0,r.Z)(N,2),B=E[0],R=E[1],S=(0,l.v9)((function(e){return e.skinState})),C=S.isDarkTheme,W=S.debugActived;function _(){return(_=(0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(!Z);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,s.useEffect)((0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.BS&&W&&R(!0),e.abrupt("return",(function(){}));case 2:case"end":return e.stop()}}),e)}))),[W]);var D=(0,b.Rt)(t&&"string"==typeof t?t:"brv-side-popuper",{isBrowser:c.jU,isMobile:c.tq},[C?"dark-specil-popup":"light-specil-popup"]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(x.Z,{fontSize:18,onClick:function(){return _.apply(this,arguments)}}),(0,P.jsxs)(v.Z,{visible:Z,position:"left",bodyClassName:D,onMaskClick:function(){return j(!1)},bodyStyle:{width:c.jU?"45vw":"62.5vw"},children:[(0,P.jsx)(L,{className:"brv-side__head",braveIconType:"bf"}),(0,P.jsx)("div",{className:"brv-menus",children:(0,P.jsxs)(h.Z,{className:"brv-navmenu-list",children:[w()(k).call(k,(function(e){return(0,P.jsx)(h.Z.Item,{className:"brv-navmenu-item",prefix:(0,P.jsx)(y.Z,{type:e.icon}),onClick:function(){j(!1),p.pathname!==e.pathname&&u.push(e.pathname)},arrow:!1,children:(0,P.jsx)("span",{className:p.pathname===e.pathname?"nav-menu-actived":"",children:o(e.label)})},e.pathname)})),B&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(h.Z.Item,{className:"brv-navmenu-item",prefix:(0,P.jsx)(y.Z,{type:"brave-debug"}),onClick:function(){j(!1),"/debug"!==p.pathname&&u.push("/debug")},arrow:!1,children:(0,P.jsx)("span",{className:"/debug"===p.pathname?"nav-menu-actived":"",children:"Debug"})},"/debug"),(0,P.jsx)(h.Z.Item,{className:"brv-navmenu-item",prefix:(0,P.jsx)(y.Z,{type:"brave-log"}),onClick:function(){j(!1),"/debug/log"!==p.pathname&&u.push("/debug/log")},arrow:!1,children:(0,P.jsx)("span",{className:"/debug/log"===p.pathname?"nav-menu-actived":"",children:"Logs"})},"/debug/log")]}),(0,P.jsx)(A.R,{})]})})]})]})}var N=t(79922);function E(e){var n=e.size,t=void 0===n?36:n,a=(0,d.k6)();return(0,P.jsx)("div",{className:"brv-head__logo",children:(0,P.jsx)("img",{src:N,fit:"cover",width:t,height:t,onClick:function(){a.push("/index")}})})}var B=t(13305),R=t(56036),S=t(65757),C=t(68197);function W(e){var n=(0,d.TH)(),t=(0,l.I0)(),o=(0,s.useState)(f.xw),v=(0,r.Z)(o,2),h=v[0],m=(v[1],(0,b.Rt)("brv-head",{isBrowser:c.jU,isMobile:c.tq})),w=(0,l.v9)((function(e){return e.skinState.head||{}})).headTitle,x=(0,l.v9)((function(e){return e.wallState})).selectedAddress,y=function(){var e=(0,a.Z)(i().mark((function e(){var a,r,o,s,c,l,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=x,window.tronWeb&&window.tronWeb.defaultAddress&&window.tronWeb.defaultAddress.base58&&(a=window.tronWeb.defaultAddress.base58),r=(0,R._8)(a),n.search&&(o=u.parse(n.search),c=(s=o||{}).debug,l=void 0===c?"":c,d=s.inviter,f=void 0===d?"":d,"actived"===l&&t((0,B.s2)(!0)),!r&&f&&(0,p.isAddress)(f)&&(r=(0,R.Xi)(f,a),t((0,S.u)(r))),f&&"reset"===f&&((0,R.bv)(a),t((0,S.u)("")),(0,C.dZ)("Reset inviter with url search: ".concat(n.search),"reset inviter")),f&&!(0,p.isAddress)(f)&&"reset"!==f&&t((0,C.RZ)("Inviter address ".concat(f," illegal."),"set inviter with url"))),t((0,S.u)(r));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.useEffect)((0,a.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(),e.abrupt("return",(function(){}));case 2:case"end":return e.stop()}}),e)}))),[w]),(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("div",{className:m,children:[(0,P.jsx)("div",{className:"brv-head__left",children:(0,P.jsx)(E,{size:36})}),(0,P.jsx)("div",{className:"brv-head__title",children:h}),(0,P.jsx)("div",{className:"brv-head__right",children:(0,P.jsx)(j,{})})]})})}},79922:(e,n,t)=>{e.exports=t.p+"50f836e9bc474700b507.png"}}]);