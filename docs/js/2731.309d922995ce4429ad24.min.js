"use strict";(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[2731],{32890:(e,t,n)=>{n.d(t,{Z:()=>P});var r=n(87462),i=n(45987),a=n(4942),o=n(1413),s=n(93433),l=n(15671),u=n(43144),d=n(97326),c=n(60136),g=n(98557),v=n(50344),f=n(80334),p=n(67294),h=n(28665),m=n(93409),F=n(416),Z=n(57028),y=["name"],C=[];function k(e,t,n,r,i,a){return"function"==typeof e?e(t,n,"source"in a?{source:a.source}:{}):r!==i}var V=function(e){(0,c.Z)(n,e);var t=(0,g.Z)(n);function n(e){var r;((0,l.Z)(this,n),(r=t.call(this,e)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=null,r.prevValidating=void 0,r.errors=C,r.warnings=C,r.cancelRegister=function(){var e=r.props,t=e.preserve,n=e.isListField,i=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,t,(0,Z.gU)(i)),r.cancelRegisterFunc=null},r.getNamePath=function(){var e=r.props,t=e.name,n=e.fieldContext.prefixName,i=void 0===n?[]:n;return void 0!==t?[].concat((0,s.Z)(i),(0,s.Z)(t)):[]},r.getRules=function(){var e=r.props,t=e.rules,n=void 0===t?[]:t,i=e.fieldContext;return n.map((function(e){return"function"==typeof e?e(i):e}))},r.refresh=function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))},r.triggerMetaEvent=function(e){var t=r.props.onMetaChange;null==t||t((0,o.Z)((0,o.Z)({},r.getMeta()),{},{destroy:e}))},r.onStoreChange=function(e,t,n){var i=r.props,a=i.shouldUpdate,o=i.dependencies,s=void 0===o?[]:o,l=i.onReset,u=n.store,d=r.getNamePath(),c=r.getValue(e),g=r.getValue(u),v=t&&(0,Z.T1)(t,d);switch("valueUpdate"===n.type&&"external"===n.source&&c!==g&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=C,r.warnings=C,r.triggerMetaEvent()),n.type){case"reset":if(!t||v)return r.touched=!1,r.dirty=!1,r.validatePromise=null,r.errors=C,r.warnings=C,r.triggerMetaEvent(),null==l||l(),void r.refresh();break;case"setField":if(v){var f=n.data;return"touched"in f&&(r.touched=f.touched),"validating"in f&&!("originRCField"in f)&&(r.validatePromise=f.validating?Promise.resolve([]):null),"errors"in f&&(r.errors=f.errors||C),"warnings"in f&&(r.warnings=f.warnings||C),r.dirty=!0,r.triggerMetaEvent(),void r.reRender()}if(a&&!d.length&&k(a,e,u,c,g,n))return void r.reRender();break;case"dependenciesUpdate":if(s.map(Z.gU).some((function(e){return(0,Z.T1)(n.relatedFields,e)})))return void r.reRender();break;default:if(v||(!s.length||d.length||a)&&k(a,e,u,c,g,n))return void r.reRender()}!0===a&&r.reRender()},r.validateRules=function(e){var t=r.getNamePath(),n=r.getValue(),i=Promise.resolve().then((function(){if(!r.mounted)return[];var a=r.props,o=a.validateFirst,l=void 0!==o&&o,u=a.messageVariables,d=(e||{}).triggerName,c=r.getRules();d&&(c=c.filter((function(e){var t=e.validateTrigger;return!t||(0,m.q)(t).includes(d)})));var g=(0,F.N)(t,n,c,e,l,u);return g.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;if(r.validatePromise===i){r.validatePromise=null;var t=[],n=[];e.forEach((function(e){var r=e.rule.warningOnly,i=e.errors,a=void 0===i?C:i;r?n.push.apply(n,(0,s.Z)(a)):t.push.apply(t,(0,s.Z)(a))})),r.errors=t,r.warnings=n,r.triggerMetaEvent(),r.reRender()}})),g}));return r.validatePromise=i,r.dirty=!0,r.errors=C,r.warnings=C,r.triggerMetaEvent(),r.reRender(),i},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(h.k).getInitialValue)(r.getNamePath())},r.getErrors=function(){return r.errors},r.getWarnings=function(){return r.warnings},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath()}},r.getOnlyChild=function(e){if("function"==typeof e){var t=r.getMeta();return(0,o.Z)((0,o.Z)({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var n=(0,v.Z)(e);return 1===n.length&&p.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(e){var t=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return(0,Z.NA)(e||t(!0),n)},r.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.trigger,i=t.validateTrigger,s=t.getValueFromEvent,l=t.normalize,u=t.valuePropName,d=t.getValueProps,c=t.fieldContext,g=void 0!==i?i:c.validateTrigger,v=r.getNamePath(),f=c.getInternalHooks,p=c.getFieldsValue,F=f(h.k),y=F.dispatch,C=r.getValue(),k=d||function(e){return(0,a.Z)({},u,e)},V=e[n],P=(0,o.Z)((0,o.Z)({},e),k(C));P[n]=function(){var e;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e=s?s.apply(void 0,n):Z.iZ.apply(void 0,[u].concat(n)),l&&(e=l(e,C,p(!0))),y({type:"updateValue",namePath:v,value:e}),V&&V.apply(void 0,n)};var R=(0,m.q)(g||[]);return R.forEach((function(e){var t=P[e];P[e]=function(){t&&t.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&y({type:"validateField",namePath:v,triggerName:e})}})),P},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(h.k).initEntityValue)((0,d.Z)(r));return r}return(0,u.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(h.k).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),i=r.child;return r.isFunction?e=i:p.isValidElement(i)?e=p.cloneElement(i,this.getControlled(i.props)):((0,f.ZP)(!i,"`children` of Field is not validate ReactElement."),e=i),p.createElement(p.Fragment,{key:t},e)}}]),n}(p.Component);V.contextType=h.Z,V.defaultProps={trigger:"onChange",valuePropName:"value"};const P=function(e){var t=e.name,n=(0,i.Z)(e,y),a=p.useContext(h.Z),o=void 0!==t?(0,Z.gU)(t):void 0,s="keep";return n.isListField||(s="_".concat((o||[]).join("_"))),p.createElement(V,(0,r.Z)({key:s,name:o},n,{fieldContext:a}))}},28665:(e,t,n)=>{n.d(t,{k:()=>a,Z:()=>s});var r=n(67294),i=n(80334),a="RC_FORM_INTERNAL_HOOKS",o=function(){(0,i.ZP)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")};const s=r.createContext({getFieldValue:o,getFieldsValue:o,getFieldError:o,getFieldWarning:o,getFieldsError:o,isFieldsTouched:o,isFieldTouched:o,isFieldValidating:o,isFieldsValidating:o,resetFields:o,setFields:o,setFieldsValue:o,validateFields:o,submit:o,getInternalHooks:function(){return o(),{dispatch:o,initEntityValue:o,registerField:o,useSubscribe:o,setInitialValues:o,setCallbacks:o,getFields:o,setValidateMessages:o,setPreserve:o,getInitialValue:o}}})},5318:(e,t,n)=>{n.d(t,{Z:()=>v});var r=n(87462),i=n(1413),a=n(29439),o=n(45987),s=n(67294),l=n(4294),u=n(28665),d=n(81696),c=n(57028),g=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"];const v=function(e,t){var n=e.name,v=e.initialValues,f=e.fields,p=e.form,h=e.preserve,m=e.children,F=e.component,Z=void 0===F?"form":F,y=e.validateMessages,C=e.validateTrigger,k=void 0===C?"onChange":C,V=e.onValuesChange,P=e.onFieldsChange,R=e.onFinish,E=e.onFinishFailed,M=(0,o.Z)(e,g),x=s.useContext(d.Z),w=(0,l.Z)(p),N=(0,a.Z)(w,1)[0],T=N.getInternalHooks(u.k),b=T.useSubscribe,I=T.setInitialValues,U=T.setCallbacks,L=T.setValidateMessages,A=T.setPreserve;s.useImperativeHandle(t,(function(){return N})),s.useEffect((function(){return x.registerForm(n,N),function(){x.unregisterForm(n)}}),[x,N,n]),L((0,i.Z)((0,i.Z)({},x.validateMessages),y)),U({onValuesChange:V,onFieldsChange:function(e){if(x.triggerFormChange(n,e),P){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];P.apply(void 0,[e].concat(r))}},onFinish:function(e){x.triggerFormFinish(n,e),R&&R(e)},onFinishFailed:E}),A(h);var H=s.useRef(null);I(v,!H.current),H.current||(H.current=!0);var O=m,S="function"==typeof m;S&&(O=m(N.getFieldsValue(!0),N));b(!S);var _=s.useRef();s.useEffect((function(){(0,c.T0)(_.current||[],f||[])||N.setFields(f||[]),_.current=f}),[f,N]);var D=s.useMemo((function(){return(0,i.Z)((0,i.Z)({},N),{},{validateTrigger:k})}),[N,k]),W=s.createElement(u.Z.Provider,{value:D},O);return!1===Z?W:s.createElement(Z,(0,r.Z)({},M,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),N.submit()},onReset:function(e){var t;e.preventDefault(),N.resetFields(),null===(t=M.onReset)||void 0===t||t.call(M,e)}}),W)}},81696:(e,t,n)=>{n.d(t,{R:()=>s,Z:()=>l});var r=n(4942),i=n(1413),a=n(67294),o=a.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),s=function(e){var t=e.validateMessages,n=e.onFormChange,s=e.onFormFinish,l=e.children,u=a.useContext(o),d=a.useRef({});return a.createElement(o.Provider,{value:(0,i.Z)((0,i.Z)({},u),{},{validateMessages:(0,i.Z)((0,i.Z)({},u.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:d.current}),u.triggerFormChange(e,t)},triggerFormFinish:function(e,t){s&&s(e,{values:t,forms:d.current}),u.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(d.current=(0,i.Z)((0,i.Z)({},d.current),{},(0,r.Z)({},e,t))),u.registerForm(e,t)},unregisterForm:function(e){var t=(0,i.Z)({},d.current);delete t[e],d.current=t,u.unregisterForm(e)}})},l)};const l=o},45378:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(1413),i=n(93433),a=n(67294),o=n(80334),s=n(28665),l=n(32890),u=n(57028);const d=function(e){var t=e.name,n=e.initialValue,d=e.children,c=e.rules,g=e.validateTrigger,v=a.useContext(s.Z),f=a.useRef({keys:[],id:0}).current;if("function"!=typeof d)return(0,o.ZP)(!1,"Form.List only accepts function as children."),null;var p=(0,u.gU)(v.prefixName)||[],h=[].concat((0,i.Z)(p),(0,i.Z)((0,u.gU)(t)));return a.createElement(s.Z.Provider,{value:(0,r.Z)((0,r.Z)({},v),{},{prefixName:h})},a.createElement(l.Z,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:c,validateTrigger:g,initialValue:n,isList:!0},(function(e,t){var n=e.value,r=void 0===n?[]:n,a=e.onChange,o=v.getFieldValue,s=function(){return o(h||[])||[]},l={add:function(e,t){var n=s();t>=0&&t<=n.length?(f.keys=[].concat((0,i.Z)(f.keys.slice(0,t)),[f.id],(0,i.Z)(f.keys.slice(t))),a([].concat((0,i.Z)(n.slice(0,t)),[e],(0,i.Z)(n.slice(t))))):(f.keys=[].concat((0,i.Z)(f.keys),[f.id]),a([].concat((0,i.Z)(n),[e]))),f.id+=1},remove:function(e){var t=s(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(f.keys=f.keys.filter((function(e,t){return!n.has(t)})),a(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=s();e<0||e>=n.length||t<0||t>=n.length||(f.keys=(0,u.pB)(f.keys,e,t),a((0,u.pB)(n,e,t)))}}},c=r||[];return Array.isArray(c)||(c=[]),d(c.map((function(e,t){var n=f.keys[t];return void 0===n&&(f.keys[t]=f.id,n=f.keys[t],f.id+=1),{name:t,key:n,isListField:!0}})),l,t)})))}}}]);