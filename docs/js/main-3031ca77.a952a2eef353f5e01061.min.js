"use strict";(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[7637],{31381:(e,t,n)=>{n.d(t,{j:()=>Z});var a=n(56655),s=n(28195),r=n(82240),i=n(33938),l=n(19623),o=n(45567),c=n(63109),u=n.n(c),p=n(42825),d=n.n(p),f=n(67294),v=n(82100),m=n(55168),h=n(9231),x=n(76849),j=n(34566),b=n(85893);function Z(e){(0,m.k6)();var t=(0,v.I0)(),n=(0,f.useState)(!1),c=(0,o.Z)(n,2),p=c[0],Z=c[1],y=(0,f.useState)(!1),P=(0,o.Z)(y,2),k=P[0],w=P[1],N=(0,f.useState)(""),S=(0,o.Z)(N,2),L=S[0],T=S[1],g=(0,f.useState)(""),A=(0,o.Z)(g,2),D=A[0],z=A[1],C=(0,v.v9)((function(e){return e})),_=C.wallState,B=C.balState;(0,f.useEffect)((function(){Z("object"===(0,l.Z)(window.tronWeb)?"has":"no"),w("object"===(0,l.Z)(window.tp)&&window.tp.isConnected());var e=_||"";"object"===(0,l.Z)(_)&&delete e.selectedHex,T(d()(e))}),[_,B]);var q=function(){var e=(0,i.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.tronWeb){e.next=3;break}throw new Error("No tronWeb in your enviroment.");case 3:return e.next=5,(0,j.dy)(t);case 5:n=e.sent,z(d()(n||"")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),z(d()(e.t0&&e.t0.message?e.t0.message:"ex parse fail")),r.Z.show({icon:"fail",content:e.t0.message,duration:6e3});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)(a.Z,{className:"debug-card",title:"Tronweb Enviroment",extra:(0,b.jsx)(s.Z,{size:"mini",fill:"outline",onClick:q,children:"Debug DApp load"}),bodyClassName:"debug-card__body",children:[(0,b.jsx)(h.Z,{label:"Has TronWeb",content:p}),(0,b.jsx)(h.Z,{label:"Has TP",content:k?"has TP":"no"}),(0,b.jsx)(x.Z,{label:"Wallet State",content:L}),(0,b.jsx)(x.Z,{label:"Debug Result",content:D})]})}},34837:(e,t,n)=>{n.d(t,{Z:()=>se});var a=n(14890),s=n(82100),r=n(55168),i=n(13535),l=n.n(i),o=n(33938),c=n(68420),u=n(27344),p=n(90306),d=n(22310),f=n(3362),v=n(63109),m=n.n(v),h=n(67294),x=n(56655),j=n(28195),b=n(3771),Z=n(27642),y=n(45567),P=n(51005),k=n(28850),w=n(52159),N=n(28883),S=n(14197),L=n(79548),T=n(85893);function g(e){(0,r.k6)();var t=(0,h.useState)(!0),n=(0,y.Z)(t,2),a=n[0],i=n[1],l=(0,h.useState)(0),o=(0,y.Z)(l,2),c=o[0],u=o[1],p=(0,h.useState)(0),d=(0,y.Z)(p,2),f=d[0],v=d[1],m=(0,h.useState)(0),g=(0,y.Z)(m,2),A=g[0],D=g[1],z=(0,h.useState)("deposit-card"),C=(0,y.Z)(z,2),_=C[0],B=C[1],q=(0,s.v9)((function(e){return e.skinState})).isDarkTheme,E=(0,s.v9)((function(e){return e.wallState})),I=E.blockchainKey,K=E.selectedAddress,R=((0,s.v9)((function(e){return e.dappState})).inviter,(0,s.v9)((function(e){return e.balState}))),V=R.bfbPLpBalance,W=R.myDepositLPAmount,M=R.PLPPoolTotal,H=R.approval,O=void 0===H?{}:H;(0,h.useEffect)((function(){var e={blockchainKey:I,fixed:4},t=O.plpApproval,n=void 0===t?0:t;i((0,N.bZ)(n,I)),u((0,N.Pj)(V,e)),v((0,N.Pj)(M,e)),D((0,N.Pj)(W,e))}),[I,K]),(0,h.useEffect)((function(){var e=(0,w.Rt)("deposit-card",{isDarkTheme:q});B(e)}),[q]);var F=function(){window.open((0,L.t)(),"sunswap")};return(0,T.jsx)("div",{className:"deposit-wrapper",children:(0,T.jsxs)(x.Z,{className:_,title:(0,T.jsxs)("div",{className:"deposit-card-title",children:[(0,T.jsx)(k.Z,{type:"brave-bf",style:{fontSize:"1.5em"}}),(0,T.jsx)(k.Z,{type:"brave-trx",style:{fontSize:"1.25em",marginLeft:"-0.25em"}}),(0,T.jsx)("span",{className:"title",children:"BFB-TRX PLP "})]}),children:[(0,T.jsxs)(Z.Z,{className:"liquidity-pool",layout:"horizontal",children:[(0,T.jsx)(Z.Z.Item,{label:"质押数量",children:(0,T.jsx)("span",{children:A})}),(0,T.jsx)(Z.Z.Item,{label:"可用余额",children:(0,T.jsx)("span",{children:c})}),(0,T.jsxs)("div",{className:"liquidity-form-item",children:[(0,T.jsx)(b.Z,{placeholder:"请输入质押数量",clearable:!0,className:"liquidity-input"}),(0,T.jsx)("div",{className:"liquidity-input-btn",children:(0,T.jsx)(j.Z,{color:"primary",size:"mini",children:"Max"})})]})]}),(0,T.jsx)("div",{className:"deposit-card-btns",children:a?(0,T.jsx)(j.Z,{color:"primary",block:!0,size:"small",children:"Approve"}):(0,T.jsx)(j.Z,{color:"primary",block:!0,size:"small",children:"Deposit"})}),(0,T.jsxs)("div",{className:"deposit-card__footer",children:[(0,T.jsx)("span",{className:"foot-label",children:"总抵押量:"}),(0,T.jsxs)("span",{className:"foot-desc",children:[f," PLP"]})]}),(0,T.jsxs)("div",{className:"deposit-card__footer flex-between",children:[(0,T.jsx)("span",{className:"foot-label",children:(0,T.jsx)(j.Z,{color:"primary",size:"mini",fill:"none",onClick:F,children:S.u})}),(0,T.jsx)("span",{className:"foot-desc",children:(0,T.jsx)(P.Z,{onClick:F})})]})]})})}var A=n(89356),D=n.n(A),z=n(63263),C=n.n(z),_=n(30699),B=n.n(_),q=n(58377),E=n.n(q),I=n(28834),K=n.n(I),R=n(13038),V=n.n(R),W=n(32752),M=n.n(W),H=n(44341),O=n.n(H),F=n(82240),U=n(44845),X=n(27897),$=(n(41864),n(79612)),G=(n(820),n(44177),n(11770),n(68197)),J=n(25108);function Q(e,t){var n=D()(e);if(C()){var a=C()(e);t&&(a=B()(a).call(a,(function(t){return E()(e,t).enumerable}))),n.push.apply(n,a)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n,a=null!=arguments[t]?arguments[t]:{};if(t%2)K()(n=Q(Object(a),!0)).call(n,(function(t){(0,U.Z)(e,t,a[t])}));else if(V())M()(e,V()(a));else{var s;K()(s=Q(Object(a))).call(s,(function(t){O()(e,t,E()(a,t))}))}}return e}function ee(e){(e||{}).inviter;var t=(0,s.I0)(),n=(0,h.useState)(!0),a=(0,y.Z)(n,2),r=(a[0],a[1]),i=(0,h.useState)(0),l=(0,y.Z)(i,2),c=l[0],u=l[1],p=(0,h.useState)(0),d=(0,y.Z)(p,2),f=d[0],v=d[1],g=(0,h.useState)(0),A=(0,y.Z)(g,2),D=A[0],z=A[1],C=(0,h.useState)(0),_=(0,y.Z)(C,2),B=_[0],q=_[1],E=(0,h.useState)("deposit-card"),I=(0,y.Z)(E,2),K=I[0],R=I[1],V=(0,s.v9)((function(e){return e.skinState})).isDarkTheme,W=(0,s.v9)((function(e){return e.wallState})),M=W.blockchainKey,H=W.selectedAddress,O=(0,s.v9)((function(e){return e.balState})),U=O.bfbLpBalance,Q=O.myDepositLPAmount,ee=O.LPPoolTotal,te=O.approval,ne=void 0===te?{}:te;(0,h.useEffect)((function(){var e={blockchainKey:M,fixed:4},t=ne.lpApproval,n=void 0===t?0:t;r((0,N.bZ)(n,M)),u((0,N.Pj)(U,e)),v((0,N.Pj)(ee,e)),z((0,N.Pj)(Q,e))}),[M,H,U,Q,ee,ne]),(0,h.useEffect)((function(){var e=(0,w.Rt)("deposit-card",{isDarkTheme:V});R(e)}),[V]);var ae=function(){window.open((0,L.t)(),"sunswap")},se=function(){var e=(0,o.Z)(m().mark((function e(){var n,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,N.TM)(M),e.prev=1,e.next=4,(0,X.jE)(n.toString());case 4:a=e.sent,t((0,$.kI)({lpApproval:"0"})),J.log(a),t((0,G.ZP)(Y(Y({},a),{},{blockchainKey:M}))),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),J.log(e.t0),F.Z.show({icon:"fail",content:"string"==typeof e.t0?e.t0:e.t0&&e.t0.message?e.t0.message:"Unknow error.",duration:5e3});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return(0,T.jsx)("div",{className:"deposit-wrapper",children:(0,T.jsxs)(x.Z,{className:K,title:(0,T.jsxs)("div",{className:"deposit-card-title",children:[(0,T.jsx)(k.Z,{type:"brave-bf",style:{fontSize:"1.5em"}}),(0,T.jsx)(k.Z,{type:"brave-trx",style:{fontSize:"1.25em",marginLeft:"-0.25em"}}),(0,T.jsx)("span",{className:"title",children:"BFB-TRX LP "})]}),children:[(0,T.jsxs)(Z.Z,{className:"liquidity-pool",layout:"horizontal",children:[(0,T.jsx)(Z.Z.Item,{label:"质押数量",children:(0,T.jsx)("span",{children:D})}),(0,T.jsx)(Z.Z.Item,{label:"可用余额",children:(0,T.jsx)("span",{children:c})}),(0,T.jsxs)("div",{className:"liquidity-form-item",children:[(0,T.jsx)(b.Z,{value:B,placeholder:"请输入质押数量",clearable:!1,onChange:function(e){q(e)},className:"liquidity-input"}),(0,T.jsx)("div",{className:"liquidity-input-btn",children:(0,T.jsx)(j.Z,{color:"primary",size:"mini",onClick:function(){q(c)},children:"Max"})})]})]}),(0,T.jsx)("div",{className:"deposit-card-btns",children:(0,T.jsx)(j.Z,{color:"primary",block:!0,size:"small",onClick:se,children:"Approve"})}),(0,T.jsxs)("div",{className:"deposit-card__footer",children:[(0,T.jsx)("span",{className:"foot-label",children:"总抵押量:"}),(0,T.jsxs)("span",{className:"foot-desc",children:[f," LP"]})]}),(0,T.jsxs)("div",{className:"deposit-card__footer flex-between",children:[(0,T.jsx)("span",{className:"foot-label",children:(0,T.jsx)(j.Z,{color:"primary",size:"mini",fill:"none",onClick:ae,children:S.u})}),(0,T.jsx)("span",{className:"foot-desc",children:(0,T.jsx)(P.Z,{onClick:ae})})]})]})})}function te(e){var t=function(){if("undefined"==typeof Reflect||!l())return!1;if(l().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(l()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.Z)(e);if(t){var s=(0,f.Z)(this).constructor;n=l()(a,arguments,s)}else n=a.apply(this,arguments);return(0,d.Z)(this,n)}}var ne=function(e){(0,p.Z)(s,e);var t,n,a=te(s);function s(e){var t;return(0,c.Z)(this,s),(t=a.call(this,e)).state={formLayout:{},layout:"horizontal"},t}return(0,u.Z)(s,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"approvalPlp",value:(n=(0,o.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"depositPlp",value:(t=(0,o.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"renderInviter",value:function(e){return(0,T.jsx)("div",{className:"deposit-wrapper",children:(0,T.jsx)("div",{className:"deposit-inviter",children:(0,T.jsx)("span",{children:e})})})}},{key:"render",value:function(){var e=this.props.inviter;return(0,T.jsxs)("div",{className:"deposit-page",children:[this.renderInviter(e),(0,T.jsx)(g,{inviter:e}),(0,T.jsx)(ee,{inviter:e})]})}}]),s}(h.Component),ae=n(56036);const se=(0,a.qC)(r.EN,(0,s.$j)((function(e){var t=e.skinState.isDarkTheme,n=e.wallState,a=n.blockchainKey,s=n.selectedAddress,r=e.balState,i=r.bfbPLpBalance,l=r.bfbLpBalance,o=r.myDepositLPAmount,c=r.myDepositPLPAmount,u=r.PLPPoolTotal,p=r.LPPoolTotal,d={blockchainKey:a,fixed:4},f=r.approval||{},v=f.plpApproval,m=f.lpApproval,h=(0,N.bZ)(v,a),x=(0,N.bZ)(m,a),j=(0,N.Pj)(i,d),b=(0,N.Pj)(c,d),Z=(0,N.Pj)(u,d),y=(0,N.Pj)(l,d),P=(0,N.Pj)(o,d),k=(0,N.Pj)(p,d);return{isDarkTheme:t,inviter:(0,ae._8)(s),plpNeedApproval:h,plNeedApproval:x,bfbPLpBalValt:j,myDepositPLPValt:b,PLPPoolTotalValt:Z,bfbLpBalValt:y,myDepositLPValt:P,LPPoolTotalValt:k}}),(function(e){return{}})))(ne)}}]);