"use strict";(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[7072],{76505:(e,t,r)=>{r.r(t),r.d(t,{AlchemyProvider:()=>i.D,AlchemyWebSocketProvider:()=>i.V,BaseProvider:()=>s.Zk,CloudflareProvider:()=>a.y,EtherscanProvider:()=>c.A,FallbackProvider:()=>d.H,Formatter:()=>p.Mb,InfuraProvider:()=>k,InfuraWebSocketProvider:()=>y,IpcProvider:()=>l,JsonRpcBatchProvider:()=>E,JsonRpcProvider:()=>_.r,JsonRpcSigner:()=>_.C,NodesmithProvider:()=>N,PocketProvider:()=>T,Provider:()=>n.zt,Resolver:()=>s.H2,StaticJsonRpcProvider:()=>f.c,UrlJsonRpcProvider:()=>f.l,Web3Provider:()=>x,WebSocketProvider:()=>h.q,getDefaultProvider:()=>U,getNetwork:()=>o.H,isCommunityResourcable:()=>p.Ed,isCommunityResource:()=>p.Gp,showThrottleMessage:()=>p.vh});var n=r(64353),o=r(79861),s=r(75361),i=r(333),a=r(66955),c=r(52490),d=r(51619);const l=null;var u=r(53587),h=r(60624),p=r(30032),g=r(80711),m=r(34216),f=r(93901);const w=new g.Yd(m.i),v="84842078b09946638c03157f83405213";class y extends h.q{constructor(e,t){const r=new k(e,t),n=r.connection;n.password&&w.throwError("INFURA WebSocket project secrets unsupported",g.Yd.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),e),(0,u.zG)(this,"apiKey",r.projectId),(0,u.zG)(this,"projectId",r.projectId),(0,u.zG)(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===v}}class k extends f.l{static getWebSocketProvider(e,t){return new y(e,t)}static getApiKey(e){const t={apiKey:v,projectId:v,projectSecret:null};return null==e||("string"==typeof e?t.projectId=e:null!=e.projectSecret?(w.assertArgument("string"==typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),w.assertArgument("string"==typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"ropsten":r="ropsten.infura.io";break;case"rinkeby":r="rinkeby.infura.io";break;case"kovan":r="kovan.infura.io";break;case"goerli":r="goerli.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;default:w.throwError("unsupported network",g.Yd.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(e,r)=>(t.projectId===v&&(0,p.vh)(),Promise.resolve(!0))};return null!=t.projectSecret&&(n.user="",n.password=t.projectSecret),n}isCommunityResource(){return this.projectId===v}}var _=r(82169),b=r(58341);class E extends _.r{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},o=new Promise(((e,t)=>{n.resolve=e,n.reject=t}));return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout((()=>{const e=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const t=e.map((e=>e.request));return this.emit("debug",{action:"requestBatch",request:(0,u.p$)(t),provider:this}),(0,b.rd)(this.connection,JSON.stringify(t)).then((r=>{this.emit("debug",{action:"response",request:t,response:r,provider:this}),e.forEach(((e,t)=>{const n=r[t];if(n.error){const t=new Error(n.error.message);t.code=n.error.code,t.data=n.error.data,e.reject(t)}else e.resolve(n.result)}))}),(r=>{this.emit("debug",{action:"response",error:r,request:t,provider:this}),e.forEach((e=>{e.reject(r)}))}))}),10)),o}}const P=new g.Yd(m.i);class N extends f.l{static getApiKey(e){return e&&"string"!=typeof e&&P.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"}static getUrl(e,t){P.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:P.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const I=new g.Yd(m.i),R={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"};class T extends f.l{constructor(e,t){if(null==t){const r=(0,u.tu)(new.target,"getNetwork")(e);if(r){const e=R[r.name];e&&(t={applicationId:e,loadBalancer:!0})}null==t&&I.throwError("unsupported network",g.Yd.errors.INVALID_ARGUMENT,{argument:"network",value:e})}super(e,t)}static getApiKey(e){null==e&&I.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",e);const t={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return"string"==typeof e?t.applicationId=e:null!=e.applicationSecretKey?(I.assertArgument("string"==typeof e.applicationId,"applicationSecretKey requires an applicationId","applicationId",e.applicationId),I.assertArgument("string"==typeof e.applicationSecretKey,"invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey,t.loadBalancer=!!e.loadBalancer):e.applicationId?(I.assertArgument("string"==typeof e.applicationId,"apiKey.applicationId must be a string","apiKey.applicationId",e.applicationId),t.applicationId=e.applicationId,t.loadBalancer=!!e.loadBalancer):I.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"goerli":r="eth-goerli.gateway.pokt.network";break;default:I.throwError("unsupported network",g.Yd.errors.INVALID_ARGUMENT,{argument:"network",value:e})}let n=null;n=t.loadBalancer?`https://${r}/v1/lb/${t.applicationId}`:`https://${r}/v1/${t.applicationId}`;const o={url:n,headers:{}};return null!=t.applicationSecretKey&&(o.user="",o.password=t.applicationSecretKey),o}isCommunityResource(){return this.applicationId===R[this.network.name]}}const S=new g.Yd(m.i);let A=1;function O(e,t){const r="Web3LegacyFetcher";return function(e,n){const o={method:e,params:n,id:A++,jsonrpc:"2.0"};return new Promise(((e,n)=>{this.emit("debug",{action:"request",fetcher:r,request:(0,u.p$)(o),provider:this}),t(o,((t,s)=>{if(t)return this.emit("debug",{action:"response",fetcher:r,error:t,request:o,provider:this}),n(t);if(this.emit("debug",{action:"response",fetcher:r,request:o,response:s,provider:this}),s.error){const e=new Error(s.error.message);return e.code=s.error.code,e.data=s.error.data,n(e)}e(s.result)}))}))}}class x extends _.r{constructor(e,t){S.checkNew(new.target,x),null==e&&S.throwArgumentError("missing provider","provider",e);let r=null,n=null,o=null;"function"==typeof e?(r="unknown:",n=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),o=e,e.request?(""===r&&(r="eip-1193:"),n=function(e){return function(t,r){null==r&&(r=[]);const n={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:(0,u.p$)(n),provider:this}),e.request(n).then((e=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:e,provider:this}),e}))}}(e)):e.sendAsync?n=O(0,e.sendAsync.bind(e)):e.send?n=O(0,e.send.bind(e)):S.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),(0,u.zG)(this,"jsonRpcFetchFunc",n),(0,u.zG)(this,"provider",o)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const j=new g.Yd(m.i);function U(e,t){if(null==e&&(e="homestead"),"string"==typeof e){const t=e.match(/^(ws|http)s?:/i);if(t)switch(t[1]){case"http":return new _.r(e);case"ws":return new h.q(e);default:j.throwArgumentError("unsupported URL scheme","network",e)}}const r=(0,o.H)(e);return r&&r._defaultProvider||j.throwError("unsupported getDefaultProvider network",g.Yd.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),r._defaultProvider({FallbackProvider:d.H,AlchemyProvider:i.D,CloudflareProvider:a.y,EtherscanProvider:c.A,InfuraProvider:k,JsonRpcProvider:_.r,NodesmithProvider:N,PocketProvider:T,Web3Provider:x,IpcProvider:l},t)}},82169:(e,t,r)=>{r.d(t,{C:()=>b,r:()=>N});var n=r(8369),o=r(2593),s=r(93286),i=r(67827),a=r(53587),c=r(44242),d=r(64377),l=r(58341),u=r(80711),h=r(34216),p=r(75361),g=function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};const m=new u.Yd(h.i),f=["call","estimateGas"];function w(e,t,r){if("call"===e&&t.code===u.Yd.errors.SERVER_ERROR){const e=t.error;if(e&&e.message.match("reverted")&&(0,s.A7)(e.data))return e.data;m.throwError("missing revert data in call exception",u.Yd.errors.CALL_EXCEPTION,{error:t,data:"0x"})}let n=t.message;t.code===u.Yd.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?n=t.error.message:"string"==typeof t.body?n=t.body:"string"==typeof t.responseText&&(n=t.responseText),n=(n||"").toLowerCase();const o=r.transaction||r.signedTransaction;throw n.match(/insufficient funds|base fee exceeds gas limit/)&&m.throwError("insufficient funds for intrinsic transaction cost",u.Yd.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:o}),n.match(/nonce too low/)&&m.throwError("nonce has already been used",u.Yd.errors.NONCE_EXPIRED,{error:t,method:e,transaction:o}),n.match(/replacement transaction underpriced/)&&m.throwError("replacement fee too low",u.Yd.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:o}),n.match(/only replay-protected/)&&m.throwError("legacy pre-eip-155 transactions not supported",u.Yd.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:o}),f.indexOf(e)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&m.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",u.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:o}),t}function v(e){return new Promise((function(t){setTimeout(t,e)}))}function y(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function k(e){return e?e.toLowerCase():e}const _={};class b extends n.E{constructor(e,t,r){if(m.checkNew(new.target,b),super(),e!==_)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");(0,a.zG)(this,"provider",t),null==r&&(r=0),"string"==typeof r?((0,a.zG)(this,"_address",this.provider.formatter.address(r)),(0,a.zG)(this,"_index",null)):"number"==typeof r?((0,a.zG)(this,"_index",r),(0,a.zG)(this,"_address",null)):m.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return m.throwError("cannot alter JSON-RPC Signer connection",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new E(_,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((e=>(e.length<=this._index&&m.throwError("unknown account #"+this._index,u.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index]))))}sendUncheckedTransaction(e){e=(0,a.DC)(e);const t=this.getAddress().then((e=>(e&&(e=e.toLowerCase()),e)));if(null==e.gasLimit){const r=(0,a.DC)(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then((e=>g(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&m.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))))),(0,a.mE)({tx:(0,a.mE)(e),sender:t}).then((({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&m.throwArgumentError("from address mismatch","transaction",e):t.from=r;const n=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then((e=>e),(e=>w("sendTransaction",e,n)))}))}signTransaction(e){return m.throwError("signing transactions is unsupported",u.Yd.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return g(this,void 0,void 0,(function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield(0,l.$l)((()=>g(this,void 0,void 0,(function*(){const e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}))),{oncePoll:this.provider})}catch(e){throw e.transactionHash=r,e}}))}signMessage(e){return g(this,void 0,void 0,(function*(){const t="string"==typeof e?(0,c.Y0)(e):e,r=yield this.getAddress();return yield this.provider.send("personal_sign",[(0,s.Dv)(t),r.toLowerCase()])}))}_legacySignMessage(e){return g(this,void 0,void 0,(function*(){const t="string"==typeof e?(0,c.Y0)(e):e,r=yield this.getAddress();return yield this.provider.send("eth_sign",[r.toLowerCase(),(0,s.Dv)(t)])}))}_signTypedData(e,t,r){return g(this,void 0,void 0,(function*(){const n=yield i.E.resolveNames(e,t,r,(e=>this.provider.resolveName(e))),o=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[o.toLowerCase(),JSON.stringify(i.E.getPayload(n.domain,t,n.value))])}))}unlock(e){return g(this,void 0,void 0,(function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])}))}}class E extends b{sendTransaction(e){return this.sendUncheckedTransaction(e).then((e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)})))}}const P={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class N extends p.Zk{constructor(e,t){m.checkNew(new.target,N);let r=t;null==r&&(r=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then((t=>{e(t)}),(e=>{t(e)}))}),0)}))),super(r),e||(e=(0,a.tu)(this.constructor,"defaultUrl")()),"string"==typeof e?(0,a.zG)(this,"connection",Object.freeze({url:e})):(0,a.zG)(this,"connection",Object.freeze((0,a.DC)(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache.detectNetwork=null}),0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return g(this,void 0,void 0,(function*(){yield v(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(null!=e){const t=(0,a.tu)(this.constructor,"getNetwork");try{return t(o.O$.from(e).toNumber())}catch(t){return m.throwError("could not detect network",u.Yd.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return m.throwError("could not detect network",u.Yd.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(e){return new b(_,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((e=>e.map((e=>this.formatter.address(e)))))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:(0,a.p$)(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const o=(0,l.rd)(this.connection,JSON.stringify(r),y).then((e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e}));return n&&(this._cache[e]=o,setTimeout((()=>{this._cache[e]=null}),0)),o}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[k(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[k(t.address),t.blockTag]];case"getCode":return["eth_getCode",[k(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[k(t.address),t.position,t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[(0,a.tu)(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[(0,a.tu)(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=k(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return g(this,void 0,void 0,(function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&o.O$.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((t=(0,a.DC)(t)).transaction=(0,a.DC)(e),delete t.transaction.type)}}const r=this.prepareRequest(e,t);null==r&&m.throwError(e+" not implemented",u.Yd.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(r){return w(e,r,t)}}))}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then((function(r){return function n(){e.send("eth_getFilterChanges",[r]).then((function(r){if(e._pendingFilter!=t)return null;let n=Promise.resolve();return r.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then((function(){return e.getTransaction(t).then((function(t){return e.emit("pending",t),null}))}))})),n.then((function(){return v(1e3)}))})).then((function(){if(e._pendingFilter==t)return setTimeout((function(){n()}),0),null;e.send("eth_uninstallFilter",[r])})).catch((e=>{}))}(),r})).catch((e=>{}))}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=(0,a.DC)(P);if(t)for(const e in t)t[e]&&(r[e]=!0);(0,a.uj)(e,r);const n={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(null==e[t])return;const r=(0,s.$P)(e[t]);"gasLimit"===t&&(t="gas"),n[t]=r})),["from","to","data"].forEach((function(t){null!=e[t]&&(n[t]=(0,s.Dv)(e[t]))})),e.accessList&&(n.accessList=(0,d.z7)(e.accessList)),n}}},93901:(e,t,r)=>{r.d(t,{c:()=>d,l:()=>l});var n=r(53587),o=r(80711),s=r(34216),i=r(82169),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};const c=new o.Yd(s.i);class d extends i.r{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return a(this,void 0,void 0,(function*(){let t=this.network;return null==t&&(t=yield e.detectNetwork.call(this),t||c.throwError("no network detected",o.Yd.errors.UNKNOWN_ERROR,{}),null==this._network&&((0,n.zG)(this,"_network",t),this.emit("network",t,null))),t}))}}class l extends d{constructor(e,t){c.checkAbstract(new.target,l),e=(0,n.tu)(new.target,"getNetwork")(e),t=(0,n.tu)(new.target,"getApiKey")(t);super((0,n.tu)(new.target,"getUrl")(e,t),e),"string"==typeof t?(0,n.zG)(this,"apiKey",t):null!=t&&Object.keys(t).forEach((e=>{(0,n.zG)(this,e,t[e])}))}_startPending(){c.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return c.throwError("API provider does not support signing",o.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return c.throwError("not implemented; sub-classes must override getUrl",o.Yd.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}},60624:(e,t,r)=>{r.d(t,{q:()=>p});var n=r(2593),o=r(53587),s=r(82169),i=r(80711),a=r(34216);let c=null;try{if(c=WebSocket,null==c)throw new Error("inject please")}catch(e){const t=new i.Yd(a.i);c=function(){t.throwError("WebSockets not supported in this environment",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var d=r(25108),l=function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))};const u=new i.Yd(a.i);let h=1;class p extends s.r{constructor(e,t){"any"===t&&u.throwError("WebSocketProvider does not support 'any' network yet",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super(e,t),this._pollingInterval=-1,this._wsReady=!1,(0,o.zG)(this,"_websocket",new c(this.connection.url)),(0,o.zG)(this,"_requests",{}),(0,o.zG)(this,"_subs",{}),(0,o.zG)(this,"_subIds",{}),(0,o.zG)(this,"_detectNetwork",super.detectNetwork()),this._websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach((e=>{this._websocket.send(this._requests[e].payload)}))},this._websocket.onmessage=e=>{const t=e.data,r=JSON.parse(t);if(null!=r.id){const e=String(r.id),n=this._requests[e];if(delete this._requests[e],void 0!==r.result)n.callback(null,r.result),this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this});else{let e=null;r.error?(e=new Error(r.error.message||"unknown error"),(0,o.zG)(e,"code",r.error.code||null),(0,o.zG)(e,"response",t)):e=new Error("unknown error"),n.callback(e,void 0),this.emit("debug",{action:"response",error:e,request:JSON.parse(n.payload),provider:this})}}else if("eth_subscription"===r.method){const e=this._subs[r.params.subscription];e&&e.processFunc(r.params.result)}else d.warn("this should not happen")};const r=setInterval((()=>{this.emit("poll")}),1e3);r.unref&&r.unref()}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){u.throwError("cannot reset events block on WebSocketProvider",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){u.throwError("cannot set polling interval on WebSocketProvider",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return l(this,void 0,void 0,(function*(){return null}))}set polling(e){e&&u.throwError("cannot set polling on WebSocketProvider",i.Yd.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=h++;return new Promise(((n,o)=>{const s=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(s),provider:this}),this._requests[String(r)]={callback:function(e,t){return e?o(e):n(t)},payload:s},this._wsReady&&this._websocket.send(s)}))}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return l(this,void 0,void 0,(function*(){let n=this._subIds[e];null==n&&(n=Promise.all(t).then((e=>this.send("eth_subscribe",e))),this._subIds[e]=n);const o=yield n;this._subs[o]={tag:e,processFunc:r}}))}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],(e=>{const t=n.O$.from(e.number).toNumber();this._emitted.block=t,this.emit("block",t)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(e=>{this.emit("pending",e)}));break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],(t=>{null==t.removed&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))}));break;case"tx":{const t=e=>{const t=e.hash;this.getTransactionReceipt(t).then((e=>{e&&this.emit(t,e)}))};t(e),this._subscribe("tx",["newHeads"],(e=>{this._events.filter((e=>"tx"===e.type)).forEach(t)}));break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:d.log("unhandled:",e)}}_stopEvent(e){let t=e.tag;if("tx"===e.type){if(this._events.filter((e=>"tx"===e.type)).length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then((e=>{this._subs[e]&&(delete this._subs[e],this.send("eth_unsubscribe",[e]))})))}destroy(){return l(this,void 0,void 0,(function*(){this._websocket.readyState===c.CONNECTING&&(yield new Promise((e=>{this._websocket.onopen=function(){e(!0)},this._websocket.onerror=function(){e(!1)}}))),this._websocket.close(1e3)}))}}},44478:(e,t,r)=>{r.d(t,{O:()=>c});var n=r(93286),o=r(80711);const s=new o.Yd("random/5.5.0");let i=null;try{if(i=window,null==i)throw new Error("try next")}catch(e){try{if(i=r.g,null==i)throw new Error("try next")}catch(e){i={}}}let a=i.crypto||i.msCrypto;function c(e){(e<=0||e>1024||e%1||e!=e)&&s.throwArgumentError("invalid length","length",e);const t=new Uint8Array(e);return a.getRandomValues(t),(0,n.lE)(t)}a&&a.getRandomValues||(s.warn("WARNING: Missing strong random number source"),a={getRandomValues:function(e){return s.throwError("no secure random source avaialble",o.Yd.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}})},52472:(e,t,r)=>{function n(e){for(let t=(e=e.slice()).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}r.d(t,{y:()=>n})}}]);