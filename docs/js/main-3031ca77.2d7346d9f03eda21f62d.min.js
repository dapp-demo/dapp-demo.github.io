"use strict";(self.webpackChunkimtoken_dapp=self.webpackChunkimtoken_dapp||[]).push([[7637],{31381:(e,t,n)=>{n.d(t,{j:()=>j});var a=n(56655),s=n(28195),r=n(82240),i=n(33938),o=n(19623),l=n(45567),c=n(63109),u=n.n(c),d=n(42825),p=n.n(d),f=n(67294),m=n(82100),v=n(55168),h=n(9231),x=n(76849),b=n(34566),Z=n(85893);function j(e){(0,v.k6)();var t=(0,m.I0)(),n=(0,f.useState)(!1),c=(0,l.Z)(n,2),d=c[0],j=c[1],k=(0,f.useState)(!1),y=(0,l.Z)(k,2),N=y[0],w=y[1],S=(0,f.useState)(""),T=(0,l.Z)(S,2),P=T[0],_=T[1],L=(0,f.useState)(""),g=(0,l.Z)(L,2),E=g[0],D=g[1],A=(0,m.v9)((function(e){return e})),C=A.wallState,B=A.balState;(0,f.useEffect)((function(){j("object"===(0,o.Z)(window.tronWeb)?"has":"no"),w("object"===(0,o.Z)(window.tp)&&window.tp.isConnected());var e=C||"";"object"===(0,o.Z)(C)&&delete e.selectedHex,_(p()(e))}),[C,B]);var O=function(){var e=(0,i.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.tronWeb){e.next=3;break}throw new Error("No tronWeb in your enviroment.");case 3:return e.next=5,(0,b.dy)(t);case 5:n=e.sent,D(p()(n||"")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),D(p()(e.t0&&e.t0.message?e.t0.message:"ex parse fail")),r.Z.show({icon:"fail",content:e.t0.message,duration:6e3});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(a.Z,{className:"debug-card",title:"Tronweb Enviroment",extra:(0,Z.jsx)(s.Z,{size:"mini",fill:"outline",onClick:O,children:"Debug DApp load"}),bodyClassName:"debug-card__body",children:[(0,Z.jsx)(h.Z,{label:"Has TronWeb",content:d}),(0,Z.jsx)(h.Z,{label:"Has TP",content:N?"has TP":"no"}),(0,Z.jsx)(x.Z,{label:"Wallet State",content:P}),(0,Z.jsx)(x.Z,{label:"Debug Result",content:E})]})}},34837:(e,t,n)=>{n.d(t,{Z:()=>ce});var a=n(14890),s=n(82100),r=n(55168),i=n(13535),o=n.n(i),l=n(68420),c=n(27344),u=n(90306),d=n(22310),p=n(3362),f=n(67294),m=n(56655),v=n(28195),h=n(3771),x=n(27642),b=n(82240),Z=n(33938),j=n(45567),k=n(63109),y=n.n(k),N=n(54579),w=n.n(N),S=n(21052),T=n.n(S),P=n(51005),_=n(28850),L=n(13866),g=n(28883),E=n(14197),D=n(79548),A=n(68197),C=n(15338),B=n(85531),O=n(67502),I=n(85893);function z(e){(0,r.k6)();var t=(0,s.I0)(),n=(0,f.useState)(!0),a=(0,j.Z)(n,2),i=a[0],o=a[1],l=(0,f.useState)(0),c=(0,j.Z)(l,2),u=c[0],d=c[1],p=(0,f.useState)(0),k=(0,j.Z)(p,2),N=k[0],S=k[1],z=(0,f.useState)(0),W=(0,j.Z)(z,2),R=W[0],q=W[1],K=(0,f.useState)(0),G=(0,j.Z)(K,2),V=G[0],X=G[1],M=(0,f.useState)(0),F=(0,j.Z)(M,2),H=F[0],U=F[1],$=(0,f.useState)(!1),J=(0,j.Z)($,2),Q=J[0],Y=J[1],ee=(0,f.useState)("deposit-card"),te=(0,j.Z)(ee,2),ne=te[0],ae=te[1],se=(0,s.v9)((function(e){return e.skinState})).isDarkTheme,re=(0,s.v9)((function(e){return e.wallState})),ie=(re.blockchainKey,re.selectedAddress),oe=(0,s.v9)((function(e){return e.dappState})).inviter,le=(0,s.v9)((function(e){return e.balState})),ce=le.bfbPLpBalance,ue=le.myDepositPLPAmount,de=le.PLPPoolTotal,pe=(0,s.v9)((function(e){return e.balState.approval})).plpApproval,fe=(0,s.v9)((function(e){return e.balState.ctrl})).beginTime;(0,f.useEffect)((function(){o((0,g.Or)(pe)),d((0,L.bW)(ce)),U((0,L.bW)(ce,!0)),S((0,L.bW)(de)),q((0,L.bW)(ue)),Y(!1)}),[ie,pe,ue,ce]),(0,f.useEffect)((function(){var e=(0,L.Rt)("deposit-card",{isDarkTheme:se});ae(e)}),[se]);var me=function(){var e=(0,Z.Z)(y().mark((function e(){var n,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=(0,g.DE)(),Y(!0),e.next=5,(0,C.TE)(n,t);case 5:a=e.sent,t((0,A.ZP)(a,"Approve to bLP token")),w()((function(){Y(!1),(0,B.Dy)()}),2e4),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),t((0,A.RZ)(e.t0,"Approve PLP Token Fail")),e.t0&&e.t0.message?b.Z.show({afterClose:function(){Y(!1)},icon:"fail",maskClassName:"brv-mask-overwhite",content:e.t0.message,duration:4e3}):Y(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){window.open((0,D.t)(),"sunswap")},he=function(){var e=(0,Z.Z)(y().mark((function e(){var n,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(T()(fe)-(new Date).getTime()/1e3>0)){e.next=3;break}throw new Error("抵押未开始");case 3:return n=(0,g.vV)(V,ce),w()((function(){Y(!1),X(""),(0,B.NK)(),(0,B.rZ)()}),2e4),Y(!0),e.next=8,(0,C._y)(n,oe,t);case 8:a=e.sent,t((0,A.ZP)(a,"Deposit PLP")),X(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),t((0,A.RZ)(e.t0,"Deposit PLP Token Fail")),e.t0&&e.t0.message?b.Z.show({icon:"fail",maskClassName:"brv-mask-overwhite",content:e.t0.message,duration:4e3,afterClose:function(){Y(!1)}}):Y(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return(0,I.jsx)("div",{className:"deposit-wrapper",children:(0,I.jsxs)(m.Z,{className:ne,title:(0,I.jsxs)("div",{className:"deposit-card-title",children:[(0,I.jsx)(_.Z,{type:"brave-bf",style:{fontSize:"1.5em"}}),(0,I.jsx)(_.Z,{type:"brave-trx",style:{fontSize:"1.25em",marginLeft:"-0.25em"}}),(0,I.jsx)("span",{className:"title",children:"BFB-TRX PLP "})]}),children:[(0,I.jsxs)(x.Z,{className:"liquidity-pool",layout:"horizontal",children:[(0,I.jsx)(x.Z.Item,{label:"质押数量",children:(0,I.jsx)("span",{children:R})}),(0,I.jsx)(x.Z.Item,{label:"可用余额",children:(0,I.jsx)("span",{children:u})}),(0,I.jsxs)("div",{className:"liquidity-form-item",children:[(0,I.jsx)(h.Z,{value:V,placeholder:"请输入质押数量",clearable:!1,disabled:Q,className:"liquidity-input",onChange:function(e){X(e)}}),(0,I.jsx)("div",{className:"liquidity-input-btn",children:(0,I.jsx)(v.Z,{color:"primary",size:"mini",disabled:Q,onClick:function(){X(H)},children:"Max"})})]})]}),(0,I.jsx)("div",{className:"deposit-card-btns",children:i?(0,I.jsx)(v.Z,{color:"primary",block:!0,size:"small",onClick:me,loading:Q,loadingText:O.Z.APPROVE_BTN_LOADIG_TEXT,children:O.Z.APPROVE_BTN_LABEL}):(0,I.jsx)(v.Z,{color:"primary",block:!0,size:"small",onClick:he,loading:Q,loadingText:O.Z.DEPOSIT_BTN_LOADING_TEXT,children:O.Z.DEPOSIT_BTN_LABEL})}),(0,I.jsxs)("div",{className:"deposit-card__footer total-deposit",children:[(0,I.jsx)("span",{className:"foot-label",children:"总抵押量:"}),(0,I.jsxs)("span",{className:"foot-desc",children:[N," PLP"]})]}),(0,I.jsxs)("div",{className:"deposit-card__footer flex-between",children:[(0,I.jsx)("span",{className:"foot-label",children:(0,I.jsx)(v.Z,{color:"primary",size:"mini",fill:"none",onClick:ve,children:E.GOTO_SUMSWAP_LABEL})}),(0,I.jsx)("span",{className:"foot-desc",children:(0,I.jsx)(P.Z,{onClick:ve})})]})]})})}var W=n(89356),R=n.n(W),q=n(63263),K=n.n(q),G=n(30699),V=n.n(G),X=n(58377),M=n.n(X),F=n(28834),H=n.n(F),U=n(13038),$=n.n(U),J=n(32752),Q=n.n(J),Y=n(44341),ee=n.n(Y),te=n(44845),ne=n(27897),ae=n(56036);function se(e,t){var n=R()(e);if(K()){var a=K()(e);t&&(a=V()(a).call(a,(function(t){return M()(e,t).enumerable}))),n.push.apply(n,a)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n,a=null!=arguments[t]?arguments[t]:{};if(t%2)H()(n=se(Object(a),!0)).call(n,(function(t){(0,te.Z)(e,t,a[t])}));else if($())Q()(e,$()(a));else{var s;H()(s=se(Object(a))).call(s,(function(t){ee()(e,t,M()(a,t))}))}}return e}function ie(e){var t=(0,s.I0)(),n=(0,f.useState)(!1),a=(0,j.Z)(n,2),r=a[0],i=a[1],o=(0,f.useState)(!0),l=(0,j.Z)(o,2),c=l[0],u=l[1],d=(0,f.useState)(0),p=(0,j.Z)(d,2),k=p[0],N=p[1],S=(0,f.useState)(0),C=(0,j.Z)(S,2),z=C[0],W=C[1],R=(0,f.useState)(0),q=(0,j.Z)(R,2),K=q[0],G=q[1],V=(0,f.useState)(0),X=(0,j.Z)(V,2),M=X[0],F=X[1],H=(0,f.useState)(0),U=(0,j.Z)(H,2),$=U[0],J=U[1],Q=(0,f.useState)(""),Y=(0,j.Z)(Q,2),ee=(Y[0],Y[1]),te=(0,f.useState)("deposit-card"),se=(0,j.Z)(te,2),ie=se[0],oe=se[1],le=(0,s.v9)((function(e){return e.skinState})).isDarkTheme,ce=(0,s.v9)((function(e){return e.dappState})).inviter,ue=(0,s.v9)((function(e){return e.balState.ctrl})).bfbBeginTime,de=(0,s.v9)((function(e){return e.wallState})),pe=de.blockchainKey,fe=de.selectedAddress,me=(0,s.v9)((function(e){return e.balState})),ve=me.bfbLpBalance,he=me.myDepositLPAmount,xe=me.LPPoolTotal,be=(0,s.v9)((function(e){return e.balState.approval})).lpApproval;(0,f.useEffect)((function(){i(!1),u((0,g.Or)(be)),N((0,L.bW)(ve)),J((0,L.bW)(ve,!0)),W((0,L.bW)(xe)),G((0,L.bW)(he))}),[ve,he,xe,be]),(0,f.useEffect)((function(){var e=(0,L.Rt)("deposit-card",{isDarkTheme:le}),t=(0,ae._8)(fe);ee(t),oe(e)}),[le]);var Ze=function(){window.open((0,D.t)(),"sunswap")},je=function(){var e=(0,Z.Z)(y().mark((function e(){var n,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,g.DE)(),e.prev=1,i(!0),e.next=5,(0,ne.jE)(n,t);case 5:a=e.sent,t((0,A.ZP)(re(re({},a),{},{blockchainKey:pe}),"Approval to bLP Token")),w()((function(){(0,B.Dy)(),i(!1)}),2e4),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),t((0,A.RZ)(e.t0,"Approve LP fail.")),e.t0&&e.t0.message?b.Z.show({afterClose:function(){i(!1)},icon:"fail",maskClassName:"brv-mask-overwhite",content:e.t0.message,duration:5e3}):i(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=(0,Z.Z)(y().mark((function e(){var n,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(T()(ue)-(new Date).getTime()/1e3>0)){e.next=3;break}throw new Error("抵押未开始");case 3:return n=(0,g.vV)(M,ve),i(!0),w()((function(){i(!1),(0,B.NK)(),(0,B.rZ)()}),2e4),e.next=8,(0,ne.nC)(n,ce,t);case 8:a=e.sent,t((0,A.ZP)(a,"Deposit LP Token")),F(""),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),t((0,A.RZ)(e.t0,"Deposit LP Token")),e.t0&&e.t0.message?b.Z.show({icon:"fail",maskClassName:"brv-mask-overwhite",content:e.t0.message,duration:3e3,afterClose:function(){i(!1)}}):i(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return(0,I.jsx)("div",{className:"deposit-wrapper",children:(0,I.jsxs)(m.Z,{className:ie,title:(0,I.jsxs)("div",{className:"deposit-card-title",children:[(0,I.jsx)(_.Z,{type:"brave-bf",style:{fontSize:"1.5em"}}),(0,I.jsx)(_.Z,{type:"brave-trx",style:{fontSize:"1.25em",marginLeft:"-0.25em"}}),(0,I.jsx)("span",{className:"title",children:"BFB-TRX LP "})]}),children:[(0,I.jsxs)(x.Z,{className:"liquidity-pool",layout:"horizontal",children:[(0,I.jsx)(x.Z.Item,{label:"质押数量",children:(0,I.jsx)("span",{children:K})}),(0,I.jsx)(x.Z.Item,{label:"可用余额",children:(0,I.jsx)("span",{children:k})}),(0,I.jsxs)("div",{className:"liquidity-form-item",children:[(0,I.jsx)(h.Z,{value:M,placeholder:"请输入质押数量",clearable:!1,disabled:r,onChange:function(e){F(e)},className:"liquidity-input"}),(0,I.jsx)("div",{className:"liquidity-input-btn",children:(0,I.jsx)(v.Z,{color:"primary",size:"mini",disabled:r,onClick:function(){F($)},children:"Max"})})]})]}),(0,I.jsx)("div",{className:"deposit-card-btns",children:c?(0,I.jsx)(v.Z,{color:"primary",block:!0,size:"small",onClick:je,loading:r,loadingText:O.Z.APPROVE_BTN_LOADIG_TEXT,children:O.Z.APPROVE_BTN_LABEL}):(0,I.jsx)(v.Z,{color:"primary",block:!0,size:"small",onClick:ke,loading:r,loadingText:O.Z.DEPOSIT_BTN_LOADING_TEXT,children:O.Z.DEPOSIT_BTN_LABEL})}),(0,I.jsxs)("div",{className:"deposit-card__footer total-deposit",children:[(0,I.jsx)("span",{className:"foot-label",children:"总抵押量:"}),(0,I.jsxs)("span",{className:"foot-desc",children:[z," LP"]})]}),(0,I.jsxs)("div",{className:"deposit-card__footer flex-between",children:[(0,I.jsx)("span",{className:"foot-label",children:(0,I.jsx)(v.Z,{color:"primary",size:"mini",fill:"none",onClick:Ze,children:E.GOTO_SUMSWAP_LABEL})}),(0,I.jsx)("span",{className:"foot-desc",children:(0,I.jsx)(P.Z,{onClick:Ze})})]})]})})}function oe(e){var t=function(){if("undefined"==typeof Reflect||!o())return!1;if(o().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(o()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.Z)(e);if(t){var s=(0,p.Z)(this).constructor;n=o()(a,arguments,s)}else n=a.apply(this,arguments);return(0,d.Z)(this,n)}}var le=function(e){(0,u.Z)(n,e);var t=oe(n);function n(e){var a;return(0,l.Z)(this,n),(a=t.call(this,e)).state={formLayout:{},layout:"horizontal"},a}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){(0,B.Dy)(),(0,B.rZ)(),(0,B.NK)()}},{key:"componentWillUnmount",value:function(){}},{key:"renderInviter",value:function(){return(0,I.jsx)("div",{className:"deposit-wrapper",children:(0,I.jsx)("div",{className:"deposit-inviter",children:(0,I.jsx)("span",{children:(0,ae._8)()})})})}},{key:"render",value:function(){this.props.inviter;return(0,I.jsxs)("div",{className:"deposit-page",children:[this.renderInviter(),(0,I.jsx)(z,{}),(0,I.jsx)(ie,{})]})}}]),n}(f.Component);const ce=(0,a.qC)(r.EN,(0,s.$j)((function(e){var t=e.skinState.isDarkTheme,n=e.wallState;n.blockchainKey,n.selectedAddress,n.inviter;return{isDarkTheme:t}}),(function(e){return{}})))(le)}}]);